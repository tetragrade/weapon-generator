var Mp=Object.defineProperty;var Fp=(d,g,a)=>g in d?Mp(d,g,{enumerable:!0,configurable:!0,writable:!0,value:a}):d[g]=a;var Bn=(d,g,a)=>Fp(d,typeof g!="symbol"?g+"":g,a);(function(){const g=document.createElement("link").relList;if(g&&g.supports&&g.supports("modulepreload"))return;for(const b of document.querySelectorAll('link[rel="modulepreload"]'))M(b);new MutationObserver(b=>{for(const S of b)if(S.type==="childList")for(const T of S.addedNodes)T.tagName==="LINK"&&T.rel==="modulepreload"&&M(T)}).observe(document,{childList:!0,subtree:!0});function a(b){const S={};return b.integrity&&(S.integrity=b.integrity),b.referrerPolicy&&(S.referrerPolicy=b.referrerPolicy),b.crossOrigin==="use-credentials"?S.credentials="include":b.crossOrigin==="anonymous"?S.credentials="omit":S.credentials="same-origin",S}function M(b){if(b.ep)return;b.ep=!0;const S=a(b);fetch(b.href,S)}})();Array.prototype.choice||(Array.prototype.choice=function(d){return this[Math.floor(this.length*d())]});Set.prototype.choice||(Set.prototype.choice=function(d){const g=Math.floor(this.size*d());let a=0;for(const M of this){if(a==g)return M;a++}});var mr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Bp(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}function Dp(d){if(Object.prototype.hasOwnProperty.call(d,"__esModule"))return d;var g=d.default;if(typeof g=="function"){var a=function M(){return this instanceof M?Reflect.construct(g,arguments,this.constructor):g.apply(this,arguments)};a.prototype=g.prototype}else a={};return Object.defineProperty(a,"__esModule",{value:!0}),Object.keys(d).forEach(function(M){var b=Object.getOwnPropertyDescriptor(d,M);Object.defineProperty(a,M,b.get?b:{enumerable:!0,get:function(){return d[M]}})}),a}var yr={exports:{}},Up=yr.exports,Es;function Np(){return Es||(Es=1,function(d){(function(g,a,M){function b(c){var A=this,P=R();A.next=function(){var m=2091639*A.s0+A.c*23283064365386963e-26;return A.s0=A.s1,A.s1=A.s2,A.s2=m-(A.c=m|0)},A.c=1,A.s0=P(" "),A.s1=P(" "),A.s2=P(" "),A.s0-=P(c),A.s0<0&&(A.s0+=1),A.s1-=P(c),A.s1<0&&(A.s1+=1),A.s2-=P(c),A.s2<0&&(A.s2+=1),P=null}function S(c,A){return A.c=c.c,A.s0=c.s0,A.s1=c.s1,A.s2=c.s2,A}function T(c,A){var P=new b(c),m=A&&A.state,x=P.next;return x.int32=function(){return P.next()*4294967296|0},x.double=function(){return x()+(x()*2097152|0)*11102230246251565e-32},x.quick=x,m&&(typeof m=="object"&&S(m,P),x.state=function(){return S(P,{})}),x}function R(){var c=4022871197,A=function(P){P=String(P);for(var m=0;m<P.length;m++){c+=P.charCodeAt(m);var x=.02519603282416938*c;c=x>>>0,x-=c,x*=c,c=x>>>0,x-=c,c+=x*4294967296}return(c>>>0)*23283064365386963e-26};return A}a&&a.exports?a.exports=T:this.alea=T})(Up,d)}(yr)),yr.exports}var xr={exports:{}},$p=xr.exports,Rs;function qp(){return Rs||(Rs=1,function(d){(function(g,a,M){function b(R){var c=this,A="";c.x=0,c.y=0,c.z=0,c.w=0,c.next=function(){var m=c.x^c.x<<11;return c.x=c.y,c.y=c.z,c.z=c.w,c.w^=c.w>>>19^m^m>>>8},R===(R|0)?c.x=R:A+=R;for(var P=0;P<A.length+64;P++)c.x^=A.charCodeAt(P)|0,c.next()}function S(R,c){return c.x=R.x,c.y=R.y,c.z=R.z,c.w=R.w,c}function T(R,c){var A=new b(R),P=c&&c.state,m=function(){return(A.next()>>>0)/4294967296};return m.double=function(){do var x=A.next()>>>11,C=(A.next()>>>0)/4294967296,F=(x+C)/(1<<21);while(F===0);return F},m.int32=A.next,m.quick=m,P&&(typeof P=="object"&&S(P,A),m.state=function(){return S(A,{})}),m}a&&a.exports?a.exports=T:this.xor128=T})($p,d)}(xr)),xr.exports}var Ar={exports:{}},Gp=Ar.exports,Ts;function Hp(){return Ts||(Ts=1,function(d){(function(g,a,M){function b(R){var c=this,A="";c.next=function(){var m=c.x^c.x>>>2;return c.x=c.y,c.y=c.z,c.z=c.w,c.w=c.v,(c.d=c.d+362437|0)+(c.v=c.v^c.v<<4^(m^m<<1))|0},c.x=0,c.y=0,c.z=0,c.w=0,c.v=0,R===(R|0)?c.x=R:A+=R;for(var P=0;P<A.length+64;P++)c.x^=A.charCodeAt(P)|0,P==A.length&&(c.d=c.x<<10^c.x>>>4),c.next()}function S(R,c){return c.x=R.x,c.y=R.y,c.z=R.z,c.w=R.w,c.v=R.v,c.d=R.d,c}function T(R,c){var A=new b(R),P=c&&c.state,m=function(){return(A.next()>>>0)/4294967296};return m.double=function(){do var x=A.next()>>>11,C=(A.next()>>>0)/4294967296,F=(x+C)/(1<<21);while(F===0);return F},m.int32=A.next,m.quick=m,P&&(typeof P=="object"&&S(P,A),m.state=function(){return S(A,{})}),m}a&&a.exports?a.exports=T:this.xorwow=T})(Gp,d)}(Ar)),Ar.exports}var Sr={exports:{}},zp=Sr.exports,Ls;function Kp(){return Ls||(Ls=1,function(d){(function(g,a,M){function b(R){var c=this;c.next=function(){var P=c.x,m=c.i,x,C;return x=P[m],x^=x>>>7,C=x^x<<24,x=P[m+1&7],C^=x^x>>>10,x=P[m+3&7],C^=x^x>>>3,x=P[m+4&7],C^=x^x<<7,x=P[m+7&7],x=x^x<<13,C^=x^x<<9,P[m]=C,c.i=m+1&7,C};function A(P,m){var x,C=[];if(m===(m|0))C[0]=m;else for(m=""+m,x=0;x<m.length;++x)C[x&7]=C[x&7]<<15^m.charCodeAt(x)+C[x+1&7]<<13;for(;C.length<8;)C.push(0);for(x=0;x<8&&C[x]===0;++x);for(x==8?C[7]=-1:C[x],P.x=C,P.i=0,x=256;x>0;--x)P.next()}A(c,R)}function S(R,c){return c.x=R.x.slice(),c.i=R.i,c}function T(R,c){R==null&&(R=+new Date);var A=new b(R),P=c&&c.state,m=function(){return(A.next()>>>0)/4294967296};return m.double=function(){do var x=A.next()>>>11,C=(A.next()>>>0)/4294967296,F=(x+C)/(1<<21);while(F===0);return F},m.int32=A.next,m.quick=m,P&&(P.x&&S(P,A),m.state=function(){return S(A,{})}),m}a&&a.exports?a.exports=T:this.xorshift7=T})(zp,d)}(Sr)),Sr.exports}var br={exports:{}},Xp=br.exports,Is;function kp(){return Is||(Is=1,function(d){(function(g,a,M){function b(R){var c=this;c.next=function(){var P=c.w,m=c.X,x=c.i,C,F;return c.w=P=P+1640531527|0,F=m[x+34&127],C=m[x=x+1&127],F^=F<<13,C^=C<<17,F^=F>>>15,C^=C>>>12,F=m[x]=F^C,c.i=x,F+(P^P>>>16)|0};function A(P,m){var x,C,F,oe,W,ee=[],Re=128;for(m===(m|0)?(C=m,m=null):(m=m+"\0",C=0,Re=Math.max(Re,m.length)),F=0,oe=-32;oe<Re;++oe)m&&(C^=m.charCodeAt((oe+32)%m.length)),oe===0&&(W=C),C^=C<<10,C^=C>>>15,C^=C<<4,C^=C>>>13,oe>=0&&(W=W+1640531527|0,x=ee[oe&127]^=C+W,F=x==0?F+1:0);for(F>=128&&(ee[(m&&m.length||0)&127]=-1),F=127,oe=4*128;oe>0;--oe)C=ee[F+34&127],x=ee[F=F+1&127],C^=C<<13,x^=x<<17,C^=C>>>15,x^=x>>>12,ee[F]=C^x;P.w=W,P.X=ee,P.i=F}A(c,R)}function S(R,c){return c.i=R.i,c.w=R.w,c.X=R.X.slice(),c}function T(R,c){R==null&&(R=+new Date);var A=new b(R),P=c&&c.state,m=function(){return(A.next()>>>0)/4294967296};return m.double=function(){do var x=A.next()>>>11,C=(A.next()>>>0)/4294967296,F=(x+C)/(1<<21);while(F===0);return F},m.int32=A.next,m.quick=m,P&&(P.X&&S(P,A),m.state=function(){return S(A,{})}),m}a&&a.exports?a.exports=T:this.xor4096=T})(Xp,d)}(br)),br.exports}var Pr={exports:{}},Zp=Pr.exports,Os;function Yp(){return Os||(Os=1,function(d){(function(g,a,M){function b(R){var c=this,A="";c.next=function(){var m=c.b,x=c.c,C=c.d,F=c.a;return m=m<<25^m>>>7^x,x=x-C|0,C=C<<24^C>>>8^F,F=F-m|0,c.b=m=m<<20^m>>>12^x,c.c=x=x-C|0,c.d=C<<16^x>>>16^F,c.a=F-m|0},c.a=0,c.b=0,c.c=-1640531527,c.d=1367130551,R===Math.floor(R)?(c.a=R/4294967296|0,c.b=R|0):A+=R;for(var P=0;P<A.length+20;P++)c.b^=A.charCodeAt(P)|0,c.next()}function S(R,c){return c.a=R.a,c.b=R.b,c.c=R.c,c.d=R.d,c}function T(R,c){var A=new b(R),P=c&&c.state,m=function(){return(A.next()>>>0)/4294967296};return m.double=function(){do var x=A.next()>>>11,C=(A.next()>>>0)/4294967296,F=(x+C)/(1<<21);while(F===0);return F},m.int32=A.next,m.quick=m,P&&(typeof P=="object"&&S(P,A),m.state=function(){return S(A,{})}),m}a&&a.exports?a.exports=T:this.tychei=T})(Zp,d)}(Pr)),Pr.exports}var Cr={exports:{}};const Jp={},Qp=Object.freeze(Object.defineProperty({__proto__:null,default:Jp},Symbol.toStringTag,{value:"Module"})),Vp=Dp(Qp);var jp=Cr.exports,Ws;function e0(){return Ws||(Ws=1,function(d){(function(g,a,M){var b=256,S=6,T=52,R="random",c=M.pow(b,S),A=M.pow(2,T),P=A*2,m=b-1,x;function C(N,K,ue){var V=[];K=K==!0?{entropy:!0}:K||{};var te=ee(W(K.entropy?[N,fe(a)]:N??Re(),3),V),we=new F(V),Te=function(){for(var Se=we.g(S),Ke=c,Be=0;Se<A;)Se=(Se+Be)*b,Ke*=b,Be=we.g(1);for(;Se>=P;)Se/=2,Ke/=2,Be>>>=1;return(Se+Be)/Ke};return Te.int32=function(){return we.g(4)|0},Te.quick=function(){return we.g(4)/4294967296},Te.double=Te,ee(fe(we.S),a),(K.pass||ue||function(Se,Ke,Be,Xe){return Xe&&(Xe.S&&oe(Xe,we),Se.state=function(){return oe(we,{})}),Be?(M[R]=Se,Ke):Se})(Te,te,"global"in K?K.global:this==M,K.state)}function F(N){var K,ue=N.length,V=this,te=0,we=V.i=V.j=0,Te=V.S=[];for(ue||(N=[ue++]);te<b;)Te[te]=te++;for(te=0;te<b;te++)Te[te]=Te[we=m&we+N[te%ue]+(K=Te[te])],Te[we]=K;(V.g=function(Se){for(var Ke,Be=0,Xe=V.i,Dn=V.j,Pn=V.S;Se--;)Ke=Pn[Xe=m&Xe+1],Be=Be*b+Pn[m&(Pn[Xe]=Pn[Dn=m&Dn+Ke])+(Pn[Dn]=Ke)];return V.i=Xe,V.j=Dn,Be})(b)}function oe(N,K){return K.i=N.i,K.j=N.j,K.S=N.S.slice(),K}function W(N,K){var ue=[],V=typeof N,te;if(K&&V=="object")for(te in N)try{ue.push(W(N[te],K-1))}catch{}return ue.length?ue:V=="string"?N:N+"\0"}function ee(N,K){for(var ue=N+"",V,te=0;te<ue.length;)K[m&te]=m&(V^=K[m&te]*19)+ue.charCodeAt(te++);return fe(K)}function Re(){try{var N;return x&&(N=x.randomBytes)?N=N(b):(N=new Uint8Array(b),(g.crypto||g.msCrypto).getRandomValues(N)),fe(N)}catch{var K=g.navigator,ue=K&&K.plugins;return[+new Date,g,ue,g.screen,fe(a)]}}function fe(N){return String.fromCharCode.apply(0,N)}if(ee(M.random(),a),d.exports){d.exports=C;try{x=Vp}catch{}}else M["seed"+R]=C})(typeof self<"u"?self:jp,[],Math)}(Cr)),Cr.exports}var Zi,Ms;function n0(){if(Ms)return Zi;Ms=1;var d=Np(),g=qp(),a=Hp(),M=Kp(),b=kp(),S=Yp(),T=e0();return T.alea=d,T.xor128=g,T.xorwow=a,T.xorshift7=M,T.xor4096=b,T.tychei=S,Zi=T,Zi}var t0=n0();const r0=Bp(t0);function I(d){return d instanceof Function?{generate:d}:{generate:()=>d}}class i0{constructor(g){Bn(this,"children");this.children=g}}class bn extends i0{constructor(){super(...arguments);Bn(this,"generate",a=>this.children.reduce((M,b)=>M+b.generate(a),""))}}String.prototype.capFirst||(String.prototype.capFirst=function(){return this.slice(0,1).toUpperCase()+this.slice(1)});const a0=I(d=>["satanist","cannibal","vampire","undead","ghost","ghoul","wendigo","skinwalker","automaton"].choice(d)),u0=I(d=>["satanists","cannibals","vampires","undead","ghost","ghouls","wendigos","skinwalkers","automatons","blood beasts"].choice(d)),s0=["bronze","iron","steel","Silver-Plated",{name:"tin",rarity:{lte:"uncommon"}},{name:"copper",rarity:{lte:"uncommon"}},{name:"oak",rarity:{lte:"uncommon"}},{name:"pine",rarity:{lte:"uncommon"}},{name:"sandstone",rarity:{lte:"uncommon"},themes:{any:["fire","earth"]}},{name:"granite",rarity:{gte:"epic"}},{name:"marble",rarity:{gte:"epic"}},{name:"alabaster",rarity:{gte:"epic"}},{name:"marble",rarity:{gte:"epic"}},{name:"silver",rarity:{gte:"epic"}},{name:"gold",rarity:{gte:"epic"}},{name:"black iron",rarity:{gte:"epic"}},{name:"silver",rarity:{gte:"epic"}},{name:"mythril",rarity:{gte:"epic"}},{name:"adamant",rarity:{gte:"epic"}},{name:"cobalt",rarity:{gte:"epic"}},{name:"radium",rarity:{gte:"legendary"}},{name:"diamond",rarity:{gte:"epic"},themes:{any:["light","earth"]}},{name:"ruby",rarity:{gte:"epic"},themes:{any:["fire","earth"]}},{name:"emerald",rarity:{gte:"epic"},themes:{any:["fire","earth"]}},{name:"sapphire",rarity:{gte:"epic"},themes:{any:["light","cloud","earth"]}},{name:"flint",rarity:{lte:"uncommon"},themes:{any:["fire","dark","earth"]}},{name:"onyx",rarity:{gte:"epic"},themes:{any:["fire","dark","earth"]}},{name:"quartz",rarity:{gte:"epic"}},{name:"glass",rarity:{gte:"epic"},themes:{any:["ice","fire","light","cloud"]}}],o0=["fiery","blazing","roaring","crackling","ruby","opal"],f0=["icy","frigid","silent","polar","Frostbound","Icebound"],c0=["Shadow-Wreathed","stygian","abyssal","spiked","Blood-Stained"],l0=["rainbow","translucent","moonlit","glittery","luminous","glowing","lunar","lucent","prismatic",{name:"quartz",rarity:{gte:"rare"}},{name:"lumensteel",rarity:{gte:"epic"}}],h0=["saccharine","candied","glazed"],g0=["corroded","corrosive"],d0=["crystal","silk-wrapped","amethyst"],p0=["brass","clockwork"],v0=["heavy","rough","slag"],w0=["gossamer","rusty","silver"],_0=["gold-banded","silver-strapped","spiked"],m0={any:s0,fire:o0,ice:f0,dark:c0,light:l0,sweet:h0,sour:g0,wizard:d0,steampunk:p0,earth:v0,cloud:w0,jungle:_0},y0=[{desc:"Fire Ball",cost:4,rarity:{gte:"rare"}},{desc:"Wall of Fire",cost:4,rarity:{gte:"rare"}},{desc:"Control Weather",cost:2,additionalNotes:["Must move conditions towards heatwave."],rarity:{lte:"rare"}},{desc:"Control Flames",cost:1,additionalNotes:["Flames larger than wielder submit only after a save."],rarity:{lte:"rare"}}],x0=[{desc:"Wall of Ice",cost:4,rarity:{gte:"rare"}},{desc:"Control Weather",cost:3,additionalNotes:["Must move conditions towards blizzard."],rarity:{lte:"rare"}},{desc:"Chilling Strike",cost:2,additionalNotes:["Upon hitting, you can choose to infuse the attack. Characters must save or be frozen solid next turn."],rarity:{lte:"rare"}}],A0=[{desc:"Commune With Demon",cost:2,rarity:{gte:"uncommon"}},{desc:"Turn Priests & Angels",cost:1,rarity:{gte:"uncommon"}},{desc:"Darkness",cost:1}],S0=[{desc:"Commune With Divinity",cost:2,rarity:{gte:"uncommon"}},{desc:"Turn Undead",cost:1},{desc:"Light",cost:1}],b0=[{desc:"Charm Person",cost:2},{desc:"Sweetberry",cost:1,additionalNotes:["Create a small berry, stats as healing potion."]},{desc:"Sugar Spray",cost:1,additionalNotes:["Sprays a sweet and sticky syrup, enough to coat the floor of a small room. Makes movement difficult."]}],P0=[{desc:"Caustic Strike",cost:2,additionalNotes:["Upon hitting, you can choose to infuse the attack. Melts objects, or damages armor of characters."]},{desc:"Locate Lemon",cost:1,additionalNotes:["Wielder learns the exact location of the closest lemon."]},{desc:"Cause Nausea",cost:1,additionalNotes:["Target must save or waste their turn vomiting."]}],C0=[{desc:"Magic Missile",cost:1},{desc:"Magic Shield",cost:1}],E0=[{desc:"Summon Steam Elemental",cost:6},{desc:"Power Machine",cost:1,additionalNotes:["Touching the weapon to a machine causes it to activate under magical power. It operates for 24 hours."]}],R0=[{desc:"Wall of stone",cost:4,rarity:{gte:"rare"}},{desc:"Petrify Person",cost:5,rarity:{gte:"rare"}},{desc:"Cure Petrification",cost:2}],T0={fire:y0,ice:x0,dark:A0,light:S0,sweet:b0,sour:P0,wizard:C0,steampunk:E0,earth:R0},L0=[{miscPower:!0,desc:"Wielder is able to move completely silently.",shapeFamily:{any:["dagger","club"]},rarity:{gte:"epic"}}],I0=[{language:!0,desc:"The language of fire."},{miscPower:!0,desc:"Wielder takes half damage from fire."},{miscPower:!0,desc:"Wielder cannot be harmed by fire.",rarity:{gte:"rare"}},{miscPower:!0,desc:"Wreathed in flames, glows like a torch",bonus:{addDamageDie:{d6:1}}},{miscPower:!0,desc:"Weapon is an expert blacksmith.",isSentient:!0}],O0=[{language:!0,desc:"The language of ice & snow."},{miscPower:!0,desc:"Wielder takes half damage from ice & cold."},{miscPower:!0,desc:"Wielder cannot be harmed by ice & cold."},{miscPower:!0,desc:"Wreathed in frigid mist.",bonus:{addDamageDie:{d6:1}},shapeFamily:{none:["dagger","sword","greatsword"]}},{miscPower:!0,desc:"Wreathed in ice, always frozen into its sheath. Requires a strength save to draw.",bonus:{addDamageDie:{d10:1}},shapeFamily:{any:["dagger","sword","greatsword"]}},{miscPower:!0,desc:"1-in-2 chance to sense icy weather before it hits, giving just enough time to escape."},{miscPower:!0,desc:"Wielder can walk on any kind of ice without breaking it."}],W0=[{miscPower:!0,desc:"Menacing aura. Bonus to saves to frighten & intimidate."},{miscPower:!0,desc:"Traps the souls of its victims. They haunt the weapon, and obey the wielder's commands."},{miscPower:!0,desc:"Wreathed in lightless black flames.",bonus:{addDamageDie:{d6:1}}},{miscPower:!0,desc:"Wielder is able to move completely silently.",shapeFamily:{any:["dagger","club"]},rarity:{gte:"epic"}}],M0=[{language:!0,desc:"Angelic"},{miscPower:!0,desc:"Wielder takes half damage from rays & beams."},{miscPower:!0,desc:"Wielder is immune to the effects of rays & beams."},{miscPower:!0,desc:"Extremely shiny, functions as a mirror."},{miscPower:!0,desc:"Can reflect and focus light as a damaging beam (2d6 damage)."},{miscPower:!0,desc:"Wielder has a wholesome aura. Bonus to saves to spread cheer and/or appear nonthreatening."}],F0=[{miscPower:!0,desc:"Weapon is an expert chef.",isSentient:!0},{miscPower:!0,desc:"The wielder magically knows the recipe of any dessert they taste."},{miscPower:!0,desc:"Cute animals follow the wielder's polite requests i.e. cats and forest birds."},{miscPower:!0,desc:"Eat business end to heal HP equal to damage roll. Renders weapon unusable until it reforms, 24 hours later."}],B0=[{miscPower:!0,desc:"Weapon is an expert alchemist.",isSentient:!0},{miscPower:!0,desc:"Wielder takes half damage from corrosive chemicals."},{miscPower:!0,desc:"Wielder is immune to the harmful effects of corrosive chemicals."},{miscPower:!0,desc:"Licking the weapon cures scurvy. It tastes sour."}],D0=[{miscPower:!0,desc:"Weapon is an expert astrologer.",isSentient:!0},{miscPower:!0,desc:"If you are not wounded, the weapon can also fire a spectral copy of itself as a projectile attack. Damage as weapon, range as bow.",rarity:{gte:"rare"}},{miscPower:!0,desc:"Each hit you land with the weapon generates a wisp. On your turn, you can launch any number of wisps at no cost. d4 damage, range as bow.",rarity:{gte:"epic"}}],U0=[{miscPower:!0,desc:"Weapon is an expert tinkerer.",isSentient:!0},{miscPower:!0,desc:"Wielder always knows which way is north."},{miscPower:!0,desc:"A widget on the weapon displays the time."}],N0=[{miscPower:!0,desc:"Can shoot an endless stream of water from its tip, pressure as garden hose."},{miscPower:!0,desc:"Can transform into an umbrella."},{miscPower:!0,desc:"Wielder gains a stealth bonus during rain & snow, as if invisible.",shapeFamily:{any:["dagger","club"]}},{miscPower:!0,desc:"You can fly, as fast as you can walk.",rarity:{gte:"epic"}}],$0=[{miscPower:!0,desc:"Wielder cannot be petrified."},{miscPower:!0,desc:"Can transform into a shovel."},{miscPower:!0,desc:"Can transform into a pickaxe."},{miscPower:!0,desc:"Weapon is an expert jeweller. It can identify any gemstone.",isSentient:!0},{miscPower:!0,desc:"Stats as (function as) a shield."},{miscPower:!0,desc:"Unaware targets that are hit by the weapon must save or be petrified.",rarity:{gte:"rare"},shapeFamily:{any:["dagger"]}}],q0={any:L0,fire:I0,ice:O0,dark:W0,light:M0,sweet:F0,sour:B0,wizard:D0,steampunk:U0,cloud:N0,earth:$0},G0=[{name:"Club",rarity:{lte:"uncommon"}},{name:"Cudgel",rarity:{lte:"uncommon"}},{name:"Rod",rarity:{lte:"uncommon"}}],H0=["Staff","Quarterstaff","Bo-Stick"],z0=["Dagger","Knife","Dirk","Stiletto","Tanto","Khanjar","Kukri","Shortsword"],K0=["Longsword","Saber","Rapier","Foil","Epee","Machete","Scimitar","Gladius",{name:"Flamberge",rarity:{gte:"rare"}},{name:"Macuahuitl",rarity:{gte:"rare"}},{name:"Khopesh",rarity:{gte:"rare"}},{name:"Shotel",rarity:{gte:"rare"}},{name:"Keyblade",rarity:{gte:"legendary"}}],X0=["Tomahawk","Hand-Axe","Axe","War-Axe","Battle-Axe"],k0=["Mace","Flail","Morning-Star","Shishpar","Nunchuks",{name:"Meteor Hammer",rarity:{gte:"rare"}}],Z0=["Greatsword","Zweihander","Nodachi",{name:"Ultra-Greatsword",rarity:{gte:"rare"}}],Y0=["Spear","Trident",{name:"Bident",rarity:{gte:"epic"}}],J0=["Polearm","Halberd","Glaive","Naginata","Bardiche","Raven's Beak","Pike",{name:"Crescent Blade",rarity:{gte:"legendary"}}],Q0=["Lance"],V0={club:G0,staff:H0,dagger:z0,sword:K0,axe:X0,mace:k0,"great-axe":["Great-Axe",{name:"Great-Scythe",rarity:{gte:"rare"}}],greatsword:Z0,spear:Y0,polearm:J0,lance:Q0,"sword (or bow)":[{name:"Bladed Bow",rarity:{gte:"legendary"}}],"dagger (or pistol)":[{name:"Pistol Sword",rarity:{gte:"legendary"}}],"sword (or musket)":[{name:"Gunblade",rarity:{gte:"legendary"}},{name:"Transforming Sniper Scythle",rarity:{gte:"legendary"}}]};function nt(d,g){return Object.entries(d).map(([a,M])=>M.map(b=>g(a,b))).flat()}const Fs={common:{percentile:1,paramsProvider:d=>({damage:{},nPassive:1,nCharges:0,nActive:d()>.9?1:0,nUnlimitedActive:0,sentienceChance:0})},uncommon:{percentile:.45,paramsProvider:d=>({damage:{},nPassive:1,nCharges:Math.ceil(d()*4),nActive:[0,1].choice(d),nUnlimitedActive:0,sentienceChance:.1})},rare:{percentile:.15,paramsProvider:d=>({damage:{},nPassive:[1,2].choice(d),nCharges:Math.ceil(d()*4),nActive:[1,2].choice(d),nUnlimitedActive:0,sentienceChance:1/3})},epic:{percentile:.05,paramsProvider:d=>({damage:{},nPassive:[1,2,3].choice(d),nCharges:Math.ceil(d()*8),nActive:[1,2,3].choice(d),nUnlimitedActive:0,sentienceChance:1/2})},legendary:{percentile:.01,paramsProvider:d=>({damage:{},nPassive:3,nCharges:Math.ceil(d()*10),nActive:[2,3,4].choice(d),nUnlimitedActive:1,sentienceChance:1})}},j0=nt(m0,(d,g)=>{switch(typeof g){case"string":return{thing:I(g),cond:{themes:d==="any"?void 0:{all:[d]}}};case"object":const a=g;if(a!==null)return{thing:I(g.name),cond:{themes:(a==null?void 0:a.themes)??(d==="any"?void 0:{all:[d]}),activePowers:a==null?void 0:a.activePowers,rarity:a==null?void 0:a.rarity,shapeFamily:a==null?void 0:a.shapeFamily}}}throw new Error("invalid shape config")}),ev=nt(T0,(d,g)=>({thing:I(g),cond:{themes:{all:[d]},activePowers:{none:[g]},rarity:g==null?void 0:g.rarity,shapeFamily:g==null?void 0:g.shapeFamily}})),nv=[{thing:{miscPower:!0,desc:new bn([I("Glows like a torch when "),u0,I(" are near")])},cond:{themes:{any:["light"]}}}].map(d=>(d.cond.passivePowers={none:[d.thing]},d)),tv=[...nv,...nt(q0,(d,g)=>{const a="miscPower"in g?{miscPower:!0,desc:typeof g.desc=="string"?I(g.desc):g.desc,bonus:g.bonus}:{language:!0,desc:g.desc};return{thing:a,cond:{themes:d==="any"?void 0:{all:[d]},passivePowers:"miscPower"in g?{none:[a]}:g==null?void 0:g.passivePowers,isSentient:"language"in g?!0:g==null?void 0:g.isSentient,languages:"languages"in g?g.languages:"language"in g&&g.desc!==null?{none:[g.desc]}:void 0,rarity:g==null?void 0:g.rarity,shapeFamily:g==null?void 0:g.shapeFamily}}})],rv=nt({fire:["compassionate","irritable","flirty","standoffish","zealous","wrathful","warm","honest"],ice:["cold","formal","haughty","idealistic","impersonal","pitiless","reserved","serious","stubborn","vengeful"],cloud:["easy-going","easy-going","easy-going"],sweet:["kind","excitable","manic","neurotic","vengeful"],sour:["antagonistic","cruel","pitiless","manic","sassy"],poison:["antagonistic","cruel","pitiless","violent","standoffish","sadistic","enjoys provoking others"],dark:["shy","tries to act mysterious","quiet","depressive","cruel","angry","vengeful","sadistic","enjoys provoking others"],light:["logical","honest","pious","zealous"]},(d,g)=>{const a=g.capFirst()+".";return{thing:I(a),cond:{themes:{all:[d]},personality:{none:[a]}}}}),iv=nt({fire:[I("regains all charges after being superheated"),I("regains a charge at the end of each scene where its wielder started a fire"),I("regains all charges when its wielder wins an argument")],ice:[I("regains all charges after being cooled to sub-zero"),I("regains a changes whenever its wielder builds a snowman"),I("regains a charge at the end of each scene where its wielder made an ice pun")],dark:[I("regains a charge upon absorbing a human soul"),I("regains a charge at the end of each scene where its wielder destroyed an object unnecessarily"),I("regains all charges each day at the witching hour")],light:[I("regains all charges after an hour in a sacred space"),I("regains all charges each day at sunrise"),new bn([I("regains a charge after defeating a "),a0])],sweet:[I("regains a charge each time it eats an extravagant dessert"),I("regains all charges each time its wielder hosts a feast"),I("regains a charge whenever its wielder compliments someone")],sour:[I("regains all charges after an hour immersed in acid"),I("regains all charges when used to fell a citrus tree"),I("regains a charge each time its wielder insults someone")],cloud:[I("regains all charges when struck by lightning"),I("regains all charges when its wielder survives a significant fall"),I("regains a charge when you kill a winged creature, or all charges if it was also a powerful foe")],wizard:[I("regains a charge when you cast one of your own spells"),I("regains all charges when its wielder learns a new spell"),I("regains all charges when its wielder wins a wizard duel"),I("regains a charge when its wielder finishes reading a new book")],steampunk:[I("regains all charges when its wielder invents something"),I("regains all charges when its wielder throws a tea party"),I("regains a charge when its wielder breaks news")],earth:[I("regains a charge when its wielder throws a rock at something important"),I("regains all charges when its wielder meditates atop a mountain"),I("regains all charges when driven into the ground while something important is happening")]},(d,g)=>({thing:g,cond:{themes:{all:[d]}}})),av=nt(V0,(d,g)=>{switch(typeof g){case"string":return{thing:I({particular:g,group:d}),cond:{}};case"object":const a=g;if(a!==null)return{thing:I({particular:a.name,group:d}),cond:{themes:a==null?void 0:a.themes,activePowers:a==null?void 0:a.activePowers,rarity:a==null?void 0:a.rarity,shapeFamily:a==null?void 0:a.shapeFamily}}}throw new Error("invalid shape config")}),uv={common:I(d=>d()>.75?1:0),uncommon:I(d=>{const g=d();return g>.75?2:g>.25?1:0}),rare:I(d=>{const g=d();return g>.75?4:g>.25?3:2}),epic:I(d=>{const g=d();return g>.5?4:g>.5?3:2}),legendary:I(d=>{const g=d();return g>.75?5:g>.25?4:3})},Ns=["fire","ice","cloud","dark","light","sweet","sour","wizard","steampunk"];new Set(Ns);const $s=["common","uncommon","rare","epic","legendary"],sv=new Set($s),ov=d=>sv.has(d);var Pt={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var fv=Pt.exports,Bs;function cv(){return Bs||(Bs=1,function(d,g){(function(){var a,M="4.17.21",b=200,S="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",T="Expected a function",R="Invalid `variable` option passed into `_.template`",c="__lodash_hash_undefined__",A=500,P="__lodash_placeholder__",m=1,x=2,C=4,F=1,oe=2,W=1,ee=2,Re=4,fe=8,N=16,K=32,ue=64,V=128,te=256,we=512,Te=30,Se="...",Ke=800,Be=16,Xe=1,Dn=2,Pn=3,Cn=1/0,dn=9007199254740991,Hs=17976931348623157e292,Ct=NaN,je=4294967295,zs=je-1,Ks=je>>>1,Xs=[["ary",V],["bind",W],["bindKey",ee],["curry",fe],["curryRight",N],["flip",we],["partial",K],["partialRight",ue],["rearg",te]],Un="[object Arguments]",Et="[object Array]",ks="[object AsyncFunction]",rt="[object Boolean]",it="[object Date]",Zs="[object DOMException]",Rt="[object Error]",Tt="[object Function]",Ji="[object GeneratorFunction]",ke="[object Map]",at="[object Number]",Ys="[object Null]",rn="[object Object]",Qi="[object Promise]",Js="[object Proxy]",ut="[object RegExp]",Ze="[object Set]",st="[object String]",Lt="[object Symbol]",Qs="[object Undefined]",ot="[object WeakMap]",Vs="[object WeakSet]",ft="[object ArrayBuffer]",Nn="[object DataView]",Er="[object Float32Array]",Rr="[object Float64Array]",Tr="[object Int8Array]",Lr="[object Int16Array]",Ir="[object Int32Array]",Or="[object Uint8Array]",Wr="[object Uint8ClampedArray]",Mr="[object Uint16Array]",Fr="[object Uint32Array]",js=/\b__p \+= '';/g,eo=/\b(__p \+=) '' \+/g,no=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Vi=/&(?:amp|lt|gt|quot|#39);/g,ji=/[&<>"']/g,to=RegExp(Vi.source),ro=RegExp(ji.source),io=/<%-([\s\S]+?)%>/g,ao=/<%([\s\S]+?)%>/g,ea=/<%=([\s\S]+?)%>/g,uo=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,so=/^\w*$/,oo=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Br=/[\\^$.*+?()[\]{}|]/g,fo=RegExp(Br.source),Dr=/^\s+/,co=/\s/,lo=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ho=/\{\n\/\* \[wrapped with (.+)\] \*/,go=/,? & /,po=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,vo=/[()=,{}\[\]\/\s]/,wo=/\\(\\)?/g,_o=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,na=/\w*$/,mo=/^[-+]0x[0-9a-f]+$/i,yo=/^0b[01]+$/i,xo=/^\[object .+?Constructor\]$/,Ao=/^0o[0-7]+$/i,So=/^(?:0|[1-9]\d*)$/,bo=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,It=/($^)/,Po=/['\n\r\u2028\u2029\\]/g,Ot="\\ud800-\\udfff",Co="\\u0300-\\u036f",Eo="\\ufe20-\\ufe2f",Ro="\\u20d0-\\u20ff",ta=Co+Eo+Ro,ra="\\u2700-\\u27bf",ia="a-z\\xdf-\\xf6\\xf8-\\xff",To="\\xac\\xb1\\xd7\\xf7",Lo="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Io="\\u2000-\\u206f",Oo=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",aa="A-Z\\xc0-\\xd6\\xd8-\\xde",ua="\\ufe0e\\ufe0f",sa=To+Lo+Io+Oo,Ur="['’]",Wo="["+Ot+"]",oa="["+sa+"]",Wt="["+ta+"]",fa="\\d+",Mo="["+ra+"]",ca="["+ia+"]",la="[^"+Ot+sa+fa+ra+ia+aa+"]",Nr="\\ud83c[\\udffb-\\udfff]",Fo="(?:"+Wt+"|"+Nr+")",ha="[^"+Ot+"]",$r="(?:\\ud83c[\\udde6-\\uddff]){2}",qr="[\\ud800-\\udbff][\\udc00-\\udfff]",$n="["+aa+"]",ga="\\u200d",da="(?:"+ca+"|"+la+")",Bo="(?:"+$n+"|"+la+")",pa="(?:"+Ur+"(?:d|ll|m|re|s|t|ve))?",va="(?:"+Ur+"(?:D|LL|M|RE|S|T|VE))?",wa=Fo+"?",_a="["+ua+"]?",Do="(?:"+ga+"(?:"+[ha,$r,qr].join("|")+")"+_a+wa+")*",Uo="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",No="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",ma=_a+wa+Do,$o="(?:"+[Mo,$r,qr].join("|")+")"+ma,qo="(?:"+[ha+Wt+"?",Wt,$r,qr,Wo].join("|")+")",Go=RegExp(Ur,"g"),Ho=RegExp(Wt,"g"),Gr=RegExp(Nr+"(?="+Nr+")|"+qo+ma,"g"),zo=RegExp([$n+"?"+ca+"+"+pa+"(?="+[oa,$n,"$"].join("|")+")",Bo+"+"+va+"(?="+[oa,$n+da,"$"].join("|")+")",$n+"?"+da+"+"+pa,$n+"+"+va,No,Uo,fa,$o].join("|"),"g"),Ko=RegExp("["+ga+Ot+ta+ua+"]"),Xo=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ko=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Zo=-1,re={};re[Er]=re[Rr]=re[Tr]=re[Lr]=re[Ir]=re[Or]=re[Wr]=re[Mr]=re[Fr]=!0,re[Un]=re[Et]=re[ft]=re[rt]=re[Nn]=re[it]=re[Rt]=re[Tt]=re[ke]=re[at]=re[rn]=re[ut]=re[Ze]=re[st]=re[ot]=!1;var ne={};ne[Un]=ne[Et]=ne[ft]=ne[Nn]=ne[rt]=ne[it]=ne[Er]=ne[Rr]=ne[Tr]=ne[Lr]=ne[Ir]=ne[ke]=ne[at]=ne[rn]=ne[ut]=ne[Ze]=ne[st]=ne[Lt]=ne[Or]=ne[Wr]=ne[Mr]=ne[Fr]=!0,ne[Rt]=ne[Tt]=ne[ot]=!1;var Yo={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Jo={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Qo={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Vo={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},jo=parseFloat,ef=parseInt,ya=typeof mr=="object"&&mr&&mr.Object===Object&&mr,nf=typeof self=="object"&&self&&self.Object===Object&&self,pe=ya||nf||Function("return this")(),Hr=g&&!g.nodeType&&g,En=Hr&&!0&&d&&!d.nodeType&&d,xa=En&&En.exports===Hr,zr=xa&&ya.process,De=function(){try{var l=En&&En.require&&En.require("util").types;return l||zr&&zr.binding&&zr.binding("util")}catch{}}(),Aa=De&&De.isArrayBuffer,Sa=De&&De.isDate,ba=De&&De.isMap,Pa=De&&De.isRegExp,Ca=De&&De.isSet,Ea=De&&De.isTypedArray;function Le(l,v,p){switch(p.length){case 0:return l.call(v);case 1:return l.call(v,p[0]);case 2:return l.call(v,p[0],p[1]);case 3:return l.call(v,p[0],p[1],p[2])}return l.apply(v,p)}function tf(l,v,p,L){for(var $=-1,Y=l==null?0:l.length;++$<Y;){var he=l[$];v(L,he,p(he),l)}return L}function Ue(l,v){for(var p=-1,L=l==null?0:l.length;++p<L&&v(l[p],p,l)!==!1;);return l}function rf(l,v){for(var p=l==null?0:l.length;p--&&v(l[p],p,l)!==!1;);return l}function Ra(l,v){for(var p=-1,L=l==null?0:l.length;++p<L;)if(!v(l[p],p,l))return!1;return!0}function pn(l,v){for(var p=-1,L=l==null?0:l.length,$=0,Y=[];++p<L;){var he=l[p];v(he,p,l)&&(Y[$++]=he)}return Y}function Mt(l,v){var p=l==null?0:l.length;return!!p&&qn(l,v,0)>-1}function Kr(l,v,p){for(var L=-1,$=l==null?0:l.length;++L<$;)if(p(v,l[L]))return!0;return!1}function ie(l,v){for(var p=-1,L=l==null?0:l.length,$=Array(L);++p<L;)$[p]=v(l[p],p,l);return $}function vn(l,v){for(var p=-1,L=v.length,$=l.length;++p<L;)l[$+p]=v[p];return l}function Xr(l,v,p,L){var $=-1,Y=l==null?0:l.length;for(L&&Y&&(p=l[++$]);++$<Y;)p=v(p,l[$],$,l);return p}function af(l,v,p,L){var $=l==null?0:l.length;for(L&&$&&(p=l[--$]);$--;)p=v(p,l[$],$,l);return p}function kr(l,v){for(var p=-1,L=l==null?0:l.length;++p<L;)if(v(l[p],p,l))return!0;return!1}var uf=Zr("length");function sf(l){return l.split("")}function of(l){return l.match(po)||[]}function Ta(l,v,p){var L;return p(l,function($,Y,he){if(v($,Y,he))return L=Y,!1}),L}function Ft(l,v,p,L){for(var $=l.length,Y=p+(L?1:-1);L?Y--:++Y<$;)if(v(l[Y],Y,l))return Y;return-1}function qn(l,v,p){return v===v?yf(l,v,p):Ft(l,La,p)}function ff(l,v,p,L){for(var $=p-1,Y=l.length;++$<Y;)if(L(l[$],v))return $;return-1}function La(l){return l!==l}function Ia(l,v){var p=l==null?0:l.length;return p?Jr(l,v)/p:Ct}function Zr(l){return function(v){return v==null?a:v[l]}}function Yr(l){return function(v){return l==null?a:l[v]}}function Oa(l,v,p,L,$){return $(l,function(Y,he,j){p=L?(L=!1,Y):v(p,Y,he,j)}),p}function cf(l,v){var p=l.length;for(l.sort(v);p--;)l[p]=l[p].value;return l}function Jr(l,v){for(var p,L=-1,$=l.length;++L<$;){var Y=v(l[L]);Y!==a&&(p=p===a?Y:p+Y)}return p}function Qr(l,v){for(var p=-1,L=Array(l);++p<l;)L[p]=v(p);return L}function lf(l,v){return ie(v,function(p){return[p,l[p]]})}function Wa(l){return l&&l.slice(0,Da(l)+1).replace(Dr,"")}function Ie(l){return function(v){return l(v)}}function Vr(l,v){return ie(v,function(p){return l[p]})}function ct(l,v){return l.has(v)}function Ma(l,v){for(var p=-1,L=l.length;++p<L&&qn(v,l[p],0)>-1;);return p}function Fa(l,v){for(var p=l.length;p--&&qn(v,l[p],0)>-1;);return p}function hf(l,v){for(var p=l.length,L=0;p--;)l[p]===v&&++L;return L}var gf=Yr(Yo),df=Yr(Jo);function pf(l){return"\\"+Vo[l]}function vf(l,v){return l==null?a:l[v]}function Gn(l){return Ko.test(l)}function wf(l){return Xo.test(l)}function _f(l){for(var v,p=[];!(v=l.next()).done;)p.push(v.value);return p}function jr(l){var v=-1,p=Array(l.size);return l.forEach(function(L,$){p[++v]=[$,L]}),p}function Ba(l,v){return function(p){return l(v(p))}}function wn(l,v){for(var p=-1,L=l.length,$=0,Y=[];++p<L;){var he=l[p];(he===v||he===P)&&(l[p]=P,Y[$++]=p)}return Y}function Bt(l){var v=-1,p=Array(l.size);return l.forEach(function(L){p[++v]=L}),p}function mf(l){var v=-1,p=Array(l.size);return l.forEach(function(L){p[++v]=[L,L]}),p}function yf(l,v,p){for(var L=p-1,$=l.length;++L<$;)if(l[L]===v)return L;return-1}function xf(l,v,p){for(var L=p+1;L--;)if(l[L]===v)return L;return L}function Hn(l){return Gn(l)?Sf(l):uf(l)}function Ye(l){return Gn(l)?bf(l):sf(l)}function Da(l){for(var v=l.length;v--&&co.test(l.charAt(v)););return v}var Af=Yr(Qo);function Sf(l){for(var v=Gr.lastIndex=0;Gr.test(l);)++v;return v}function bf(l){return l.match(Gr)||[]}function Pf(l){return l.match(zo)||[]}var Cf=function l(v){v=v==null?pe:zn.defaults(pe.Object(),v,zn.pick(pe,ko));var p=v.Array,L=v.Date,$=v.Error,Y=v.Function,he=v.Math,j=v.Object,ei=v.RegExp,Ef=v.String,Ne=v.TypeError,Dt=p.prototype,Rf=Y.prototype,Kn=j.prototype,Ut=v["__core-js_shared__"],Nt=Rf.toString,Q=Kn.hasOwnProperty,Tf=0,Ua=function(){var e=/[^.]+$/.exec(Ut&&Ut.keys&&Ut.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),$t=Kn.toString,Lf=Nt.call(j),If=pe._,Of=ei("^"+Nt.call(Q).replace(Br,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),qt=xa?v.Buffer:a,_n=v.Symbol,Gt=v.Uint8Array,Na=qt?qt.allocUnsafe:a,Ht=Ba(j.getPrototypeOf,j),$a=j.create,qa=Kn.propertyIsEnumerable,zt=Dt.splice,Ga=_n?_n.isConcatSpreadable:a,lt=_n?_n.iterator:a,Rn=_n?_n.toStringTag:a,Kt=function(){try{var e=Wn(j,"defineProperty");return e({},"",{}),e}catch{}}(),Wf=v.clearTimeout!==pe.clearTimeout&&v.clearTimeout,Mf=L&&L.now!==pe.Date.now&&L.now,Ff=v.setTimeout!==pe.setTimeout&&v.setTimeout,Xt=he.ceil,kt=he.floor,ni=j.getOwnPropertySymbols,Bf=qt?qt.isBuffer:a,Ha=v.isFinite,Df=Dt.join,Uf=Ba(j.keys,j),ge=he.max,_e=he.min,Nf=L.now,$f=v.parseInt,za=he.random,qf=Dt.reverse,ti=Wn(v,"DataView"),ht=Wn(v,"Map"),ri=Wn(v,"Promise"),Xn=Wn(v,"Set"),gt=Wn(v,"WeakMap"),dt=Wn(j,"create"),Zt=gt&&new gt,kn={},Gf=Mn(ti),Hf=Mn(ht),zf=Mn(ri),Kf=Mn(Xn),Xf=Mn(gt),Yt=_n?_n.prototype:a,pt=Yt?Yt.valueOf:a,Ka=Yt?Yt.toString:a;function u(e){if(se(e)&&!q(e)&&!(e instanceof k)){if(e instanceof $e)return e;if(Q.call(e,"__wrapped__"))return Xu(e)}return new $e(e)}var Zn=function(){function e(){}return function(n){if(!ae(n))return{};if($a)return $a(n);e.prototype=n;var t=new e;return e.prototype=a,t}}();function Jt(){}function $e(e,n){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!n,this.__index__=0,this.__values__=a}u.templateSettings={escape:io,evaluate:ao,interpolate:ea,variable:"",imports:{_:u}},u.prototype=Jt.prototype,u.prototype.constructor=u,$e.prototype=Zn(Jt.prototype),$e.prototype.constructor=$e;function k(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=je,this.__views__=[]}function kf(){var e=new k(this.__wrapped__);return e.__actions__=be(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=be(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=be(this.__views__),e}function Zf(){if(this.__filtered__){var e=new k(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function Yf(){var e=this.__wrapped__.value(),n=this.__dir__,t=q(e),r=n<0,i=t?e.length:0,s=sl(0,i,this.__views__),o=s.start,f=s.end,h=f-o,w=r?f:o-1,_=this.__iteratees__,y=_.length,E=0,O=_e(h,this.__takeCount__);if(!t||!r&&i==h&&O==h)return pu(e,this.__actions__);var D=[];e:for(;h--&&E<O;){w+=n;for(var H=-1,U=e[w];++H<y;){var X=_[H],Z=X.iteratee,Me=X.type,Ae=Z(U);if(Me==Dn)U=Ae;else if(!Ae){if(Me==Xe)continue e;break e}}D[E++]=U}return D}k.prototype=Zn(Jt.prototype),k.prototype.constructor=k;function Tn(e){var n=-1,t=e==null?0:e.length;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}function Jf(){this.__data__=dt?dt(null):{},this.size=0}function Qf(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}function Vf(e){var n=this.__data__;if(dt){var t=n[e];return t===c?a:t}return Q.call(n,e)?n[e]:a}function jf(e){var n=this.__data__;return dt?n[e]!==a:Q.call(n,e)}function ec(e,n){var t=this.__data__;return this.size+=this.has(e)?0:1,t[e]=dt&&n===a?c:n,this}Tn.prototype.clear=Jf,Tn.prototype.delete=Qf,Tn.prototype.get=Vf,Tn.prototype.has=jf,Tn.prototype.set=ec;function an(e){var n=-1,t=e==null?0:e.length;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}function nc(){this.__data__=[],this.size=0}function tc(e){var n=this.__data__,t=Qt(n,e);if(t<0)return!1;var r=n.length-1;return t==r?n.pop():zt.call(n,t,1),--this.size,!0}function rc(e){var n=this.__data__,t=Qt(n,e);return t<0?a:n[t][1]}function ic(e){return Qt(this.__data__,e)>-1}function ac(e,n){var t=this.__data__,r=Qt(t,e);return r<0?(++this.size,t.push([e,n])):t[r][1]=n,this}an.prototype.clear=nc,an.prototype.delete=tc,an.prototype.get=rc,an.prototype.has=ic,an.prototype.set=ac;function un(e){var n=-1,t=e==null?0:e.length;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}function uc(){this.size=0,this.__data__={hash:new Tn,map:new(ht||an),string:new Tn}}function sc(e){var n=fr(this,e).delete(e);return this.size-=n?1:0,n}function oc(e){return fr(this,e).get(e)}function fc(e){return fr(this,e).has(e)}function cc(e,n){var t=fr(this,e),r=t.size;return t.set(e,n),this.size+=t.size==r?0:1,this}un.prototype.clear=uc,un.prototype.delete=sc,un.prototype.get=oc,un.prototype.has=fc,un.prototype.set=cc;function Ln(e){var n=-1,t=e==null?0:e.length;for(this.__data__=new un;++n<t;)this.add(e[n])}function lc(e){return this.__data__.set(e,c),this}function hc(e){return this.__data__.has(e)}Ln.prototype.add=Ln.prototype.push=lc,Ln.prototype.has=hc;function Je(e){var n=this.__data__=new an(e);this.size=n.size}function gc(){this.__data__=new an,this.size=0}function dc(e){var n=this.__data__,t=n.delete(e);return this.size=n.size,t}function pc(e){return this.__data__.get(e)}function vc(e){return this.__data__.has(e)}function wc(e,n){var t=this.__data__;if(t instanceof an){var r=t.__data__;if(!ht||r.length<b-1)return r.push([e,n]),this.size=++t.size,this;t=this.__data__=new un(r)}return t.set(e,n),this.size=t.size,this}Je.prototype.clear=gc,Je.prototype.delete=dc,Je.prototype.get=pc,Je.prototype.has=vc,Je.prototype.set=wc;function Xa(e,n){var t=q(e),r=!t&&Fn(e),i=!t&&!r&&Sn(e),s=!t&&!r&&!i&&Vn(e),o=t||r||i||s,f=o?Qr(e.length,Ef):[],h=f.length;for(var w in e)(n||Q.call(e,w))&&!(o&&(w=="length"||i&&(w=="offset"||w=="parent")||s&&(w=="buffer"||w=="byteLength"||w=="byteOffset")||cn(w,h)))&&f.push(w);return f}function ka(e){var n=e.length;return n?e[di(0,n-1)]:a}function _c(e,n){return cr(be(e),In(n,0,e.length))}function mc(e){return cr(be(e))}function ii(e,n,t){(t!==a&&!Qe(e[n],t)||t===a&&!(n in e))&&sn(e,n,t)}function vt(e,n,t){var r=e[n];(!(Q.call(e,n)&&Qe(r,t))||t===a&&!(n in e))&&sn(e,n,t)}function Qt(e,n){for(var t=e.length;t--;)if(Qe(e[t][0],n))return t;return-1}function yc(e,n,t,r){return mn(e,function(i,s,o){n(r,i,t(i),o)}),r}function Za(e,n){return e&&nn(n,de(n),e)}function xc(e,n){return e&&nn(n,Ce(n),e)}function sn(e,n,t){n=="__proto__"&&Kt?Kt(e,n,{configurable:!0,enumerable:!0,value:t,writable:!0}):e[n]=t}function ai(e,n){for(var t=-1,r=n.length,i=p(r),s=e==null;++t<r;)i[t]=s?a:Ni(e,n[t]);return i}function In(e,n,t){return e===e&&(t!==a&&(e=e<=t?e:t),n!==a&&(e=e>=n?e:n)),e}function qe(e,n,t,r,i,s){var o,f=n&m,h=n&x,w=n&C;if(t&&(o=i?t(e,r,i,s):t(e)),o!==a)return o;if(!ae(e))return e;var _=q(e);if(_){if(o=fl(e),!f)return be(e,o)}else{var y=me(e),E=y==Tt||y==Ji;if(Sn(e))return _u(e,f);if(y==rn||y==Un||E&&!i){if(o=h||E?{}:Du(e),!f)return h?Vc(e,xc(o,e)):Qc(e,Za(o,e))}else{if(!ne[y])return i?e:{};o=cl(e,y,f)}}s||(s=new Je);var O=s.get(e);if(O)return O;s.set(e,o),hs(e)?e.forEach(function(U){o.add(qe(U,n,t,U,e,s))}):cs(e)&&e.forEach(function(U,X){o.set(X,qe(U,n,t,X,e,s))});var D=w?h?Pi:bi:h?Ce:de,H=_?a:D(e);return Ue(H||e,function(U,X){H&&(X=U,U=e[X]),vt(o,X,qe(U,n,t,X,e,s))}),o}function Ac(e){var n=de(e);return function(t){return Ya(t,e,n)}}function Ya(e,n,t){var r=t.length;if(e==null)return!r;for(e=j(e);r--;){var i=t[r],s=n[i],o=e[i];if(o===a&&!(i in e)||!s(o))return!1}return!0}function Ja(e,n,t){if(typeof e!="function")throw new Ne(T);return St(function(){e.apply(a,t)},n)}function wt(e,n,t,r){var i=-1,s=Mt,o=!0,f=e.length,h=[],w=n.length;if(!f)return h;t&&(n=ie(n,Ie(t))),r?(s=Kr,o=!1):n.length>=b&&(s=ct,o=!1,n=new Ln(n));e:for(;++i<f;){var _=e[i],y=t==null?_:t(_);if(_=r||_!==0?_:0,o&&y===y){for(var E=w;E--;)if(n[E]===y)continue e;h.push(_)}else s(n,y,r)||h.push(_)}return h}var mn=Su(en),Qa=Su(si,!0);function Sc(e,n){var t=!0;return mn(e,function(r,i,s){return t=!!n(r,i,s),t}),t}function Vt(e,n,t){for(var r=-1,i=e.length;++r<i;){var s=e[r],o=n(s);if(o!=null&&(f===a?o===o&&!We(o):t(o,f)))var f=o,h=s}return h}function bc(e,n,t,r){var i=e.length;for(t=G(t),t<0&&(t=-t>i?0:i+t),r=r===a||r>i?i:G(r),r<0&&(r+=i),r=t>r?0:ds(r);t<r;)e[t++]=n;return e}function Va(e,n){var t=[];return mn(e,function(r,i,s){n(r,i,s)&&t.push(r)}),t}function ve(e,n,t,r,i){var s=-1,o=e.length;for(t||(t=hl),i||(i=[]);++s<o;){var f=e[s];n>0&&t(f)?n>1?ve(f,n-1,t,r,i):vn(i,f):r||(i[i.length]=f)}return i}var ui=bu(),ja=bu(!0);function en(e,n){return e&&ui(e,n,de)}function si(e,n){return e&&ja(e,n,de)}function jt(e,n){return pn(n,function(t){return ln(e[t])})}function On(e,n){n=xn(n,e);for(var t=0,r=n.length;e!=null&&t<r;)e=e[tn(n[t++])];return t&&t==r?e:a}function eu(e,n,t){var r=n(e);return q(e)?r:vn(r,t(e))}function ye(e){return e==null?e===a?Qs:Ys:Rn&&Rn in j(e)?ul(e):ml(e)}function oi(e,n){return e>n}function Pc(e,n){return e!=null&&Q.call(e,n)}function Cc(e,n){return e!=null&&n in j(e)}function Ec(e,n,t){return e>=_e(n,t)&&e<ge(n,t)}function fi(e,n,t){for(var r=t?Kr:Mt,i=e[0].length,s=e.length,o=s,f=p(s),h=1/0,w=[];o--;){var _=e[o];o&&n&&(_=ie(_,Ie(n))),h=_e(_.length,h),f[o]=!t&&(n||i>=120&&_.length>=120)?new Ln(o&&_):a}_=e[0];var y=-1,E=f[0];e:for(;++y<i&&w.length<h;){var O=_[y],D=n?n(O):O;if(O=t||O!==0?O:0,!(E?ct(E,D):r(w,D,t))){for(o=s;--o;){var H=f[o];if(!(H?ct(H,D):r(e[o],D,t)))continue e}E&&E.push(D),w.push(O)}}return w}function Rc(e,n,t,r){return en(e,function(i,s,o){n(r,t(i),s,o)}),r}function _t(e,n,t){n=xn(n,e),e=qu(e,n);var r=e==null?e:e[tn(He(n))];return r==null?a:Le(r,e,t)}function nu(e){return se(e)&&ye(e)==Un}function Tc(e){return se(e)&&ye(e)==ft}function Lc(e){return se(e)&&ye(e)==it}function mt(e,n,t,r,i){return e===n?!0:e==null||n==null||!se(e)&&!se(n)?e!==e&&n!==n:Ic(e,n,t,r,mt,i)}function Ic(e,n,t,r,i,s){var o=q(e),f=q(n),h=o?Et:me(e),w=f?Et:me(n);h=h==Un?rn:h,w=w==Un?rn:w;var _=h==rn,y=w==rn,E=h==w;if(E&&Sn(e)){if(!Sn(n))return!1;o=!0,_=!1}if(E&&!_)return s||(s=new Je),o||Vn(e)?Mu(e,n,t,r,i,s):il(e,n,h,t,r,i,s);if(!(t&F)){var O=_&&Q.call(e,"__wrapped__"),D=y&&Q.call(n,"__wrapped__");if(O||D){var H=O?e.value():e,U=D?n.value():n;return s||(s=new Je),i(H,U,t,r,s)}}return E?(s||(s=new Je),al(e,n,t,r,i,s)):!1}function Oc(e){return se(e)&&me(e)==ke}function ci(e,n,t,r){var i=t.length,s=i,o=!r;if(e==null)return!s;for(e=j(e);i--;){var f=t[i];if(o&&f[2]?f[1]!==e[f[0]]:!(f[0]in e))return!1}for(;++i<s;){f=t[i];var h=f[0],w=e[h],_=f[1];if(o&&f[2]){if(w===a&&!(h in e))return!1}else{var y=new Je;if(r)var E=r(w,_,h,e,n,y);if(!(E===a?mt(_,w,F|oe,r,y):E))return!1}}return!0}function tu(e){if(!ae(e)||dl(e))return!1;var n=ln(e)?Of:xo;return n.test(Mn(e))}function Wc(e){return se(e)&&ye(e)==ut}function Mc(e){return se(e)&&me(e)==Ze}function Fc(e){return se(e)&&vr(e.length)&&!!re[ye(e)]}function ru(e){return typeof e=="function"?e:e==null?Ee:typeof e=="object"?q(e)?uu(e[0],e[1]):au(e):Ps(e)}function li(e){if(!At(e))return Uf(e);var n=[];for(var t in j(e))Q.call(e,t)&&t!="constructor"&&n.push(t);return n}function Bc(e){if(!ae(e))return _l(e);var n=At(e),t=[];for(var r in e)r=="constructor"&&(n||!Q.call(e,r))||t.push(r);return t}function hi(e,n){return e<n}function iu(e,n){var t=-1,r=Pe(e)?p(e.length):[];return mn(e,function(i,s,o){r[++t]=n(i,s,o)}),r}function au(e){var n=Ei(e);return n.length==1&&n[0][2]?Nu(n[0][0],n[0][1]):function(t){return t===e||ci(t,e,n)}}function uu(e,n){return Ti(e)&&Uu(n)?Nu(tn(e),n):function(t){var r=Ni(t,e);return r===a&&r===n?$i(t,e):mt(n,r,F|oe)}}function er(e,n,t,r,i){e!==n&&ui(n,function(s,o){if(i||(i=new Je),ae(s))Dc(e,n,o,t,er,r,i);else{var f=r?r(Ii(e,o),s,o+"",e,n,i):a;f===a&&(f=s),ii(e,o,f)}},Ce)}function Dc(e,n,t,r,i,s,o){var f=Ii(e,t),h=Ii(n,t),w=o.get(h);if(w){ii(e,t,w);return}var _=s?s(f,h,t+"",e,n,o):a,y=_===a;if(y){var E=q(h),O=!E&&Sn(h),D=!E&&!O&&Vn(h);_=h,E||O||D?q(f)?_=f:ce(f)?_=be(f):O?(y=!1,_=_u(h,!0)):D?(y=!1,_=mu(h,!0)):_=[]:bt(h)||Fn(h)?(_=f,Fn(f)?_=ps(f):(!ae(f)||ln(f))&&(_=Du(h))):y=!1}y&&(o.set(h,_),i(_,h,r,s,o),o.delete(h)),ii(e,t,_)}function su(e,n){var t=e.length;if(t)return n+=n<0?t:0,cn(n,t)?e[n]:a}function ou(e,n,t){n.length?n=ie(n,function(s){return q(s)?function(o){return On(o,s.length===1?s[0]:s)}:s}):n=[Ee];var r=-1;n=ie(n,Ie(B()));var i=iu(e,function(s,o,f){var h=ie(n,function(w){return w(s)});return{criteria:h,index:++r,value:s}});return cf(i,function(s,o){return Jc(s,o,t)})}function Uc(e,n){return fu(e,n,function(t,r){return $i(e,r)})}function fu(e,n,t){for(var r=-1,i=n.length,s={};++r<i;){var o=n[r],f=On(e,o);t(f,o)&&yt(s,xn(o,e),f)}return s}function Nc(e){return function(n){return On(n,e)}}function gi(e,n,t,r){var i=r?ff:qn,s=-1,o=n.length,f=e;for(e===n&&(n=be(n)),t&&(f=ie(e,Ie(t)));++s<o;)for(var h=0,w=n[s],_=t?t(w):w;(h=i(f,_,h,r))>-1;)f!==e&&zt.call(f,h,1),zt.call(e,h,1);return e}function cu(e,n){for(var t=e?n.length:0,r=t-1;t--;){var i=n[t];if(t==r||i!==s){var s=i;cn(i)?zt.call(e,i,1):wi(e,i)}}return e}function di(e,n){return e+kt(za()*(n-e+1))}function $c(e,n,t,r){for(var i=-1,s=ge(Xt((n-e)/(t||1)),0),o=p(s);s--;)o[r?s:++i]=e,e+=t;return o}function pi(e,n){var t="";if(!e||n<1||n>dn)return t;do n%2&&(t+=e),n=kt(n/2),n&&(e+=e);while(n);return t}function z(e,n){return Oi($u(e,n,Ee),e+"")}function qc(e){return ka(jn(e))}function Gc(e,n){var t=jn(e);return cr(t,In(n,0,t.length))}function yt(e,n,t,r){if(!ae(e))return e;n=xn(n,e);for(var i=-1,s=n.length,o=s-1,f=e;f!=null&&++i<s;){var h=tn(n[i]),w=t;if(h==="__proto__"||h==="constructor"||h==="prototype")return e;if(i!=o){var _=f[h];w=r?r(_,h,f):a,w===a&&(w=ae(_)?_:cn(n[i+1])?[]:{})}vt(f,h,w),f=f[h]}return e}var lu=Zt?function(e,n){return Zt.set(e,n),e}:Ee,Hc=Kt?function(e,n){return Kt(e,"toString",{configurable:!0,enumerable:!1,value:Gi(n),writable:!0})}:Ee;function zc(e){return cr(jn(e))}function Ge(e,n,t){var r=-1,i=e.length;n<0&&(n=-n>i?0:i+n),t=t>i?i:t,t<0&&(t+=i),i=n>t?0:t-n>>>0,n>>>=0;for(var s=p(i);++r<i;)s[r]=e[r+n];return s}function Kc(e,n){var t;return mn(e,function(r,i,s){return t=n(r,i,s),!t}),!!t}function nr(e,n,t){var r=0,i=e==null?r:e.length;if(typeof n=="number"&&n===n&&i<=Ks){for(;r<i;){var s=r+i>>>1,o=e[s];o!==null&&!We(o)&&(t?o<=n:o<n)?r=s+1:i=s}return i}return vi(e,n,Ee,t)}function vi(e,n,t,r){var i=0,s=e==null?0:e.length;if(s===0)return 0;n=t(n);for(var o=n!==n,f=n===null,h=We(n),w=n===a;i<s;){var _=kt((i+s)/2),y=t(e[_]),E=y!==a,O=y===null,D=y===y,H=We(y);if(o)var U=r||D;else w?U=D&&(r||E):f?U=D&&E&&(r||!O):h?U=D&&E&&!O&&(r||!H):O||H?U=!1:U=r?y<=n:y<n;U?i=_+1:s=_}return _e(s,zs)}function hu(e,n){for(var t=-1,r=e.length,i=0,s=[];++t<r;){var o=e[t],f=n?n(o):o;if(!t||!Qe(f,h)){var h=f;s[i++]=o===0?0:o}}return s}function gu(e){return typeof e=="number"?e:We(e)?Ct:+e}function Oe(e){if(typeof e=="string")return e;if(q(e))return ie(e,Oe)+"";if(We(e))return Ka?Ka.call(e):"";var n=e+"";return n=="0"&&1/e==-Cn?"-0":n}function yn(e,n,t){var r=-1,i=Mt,s=e.length,o=!0,f=[],h=f;if(t)o=!1,i=Kr;else if(s>=b){var w=n?null:tl(e);if(w)return Bt(w);o=!1,i=ct,h=new Ln}else h=n?[]:f;e:for(;++r<s;){var _=e[r],y=n?n(_):_;if(_=t||_!==0?_:0,o&&y===y){for(var E=h.length;E--;)if(h[E]===y)continue e;n&&h.push(y),f.push(_)}else i(h,y,t)||(h!==f&&h.push(y),f.push(_))}return f}function wi(e,n){return n=xn(n,e),e=qu(e,n),e==null||delete e[tn(He(n))]}function du(e,n,t,r){return yt(e,n,t(On(e,n)),r)}function tr(e,n,t,r){for(var i=e.length,s=r?i:-1;(r?s--:++s<i)&&n(e[s],s,e););return t?Ge(e,r?0:s,r?s+1:i):Ge(e,r?s+1:0,r?i:s)}function pu(e,n){var t=e;return t instanceof k&&(t=t.value()),Xr(n,function(r,i){return i.func.apply(i.thisArg,vn([r],i.args))},t)}function _i(e,n,t){var r=e.length;if(r<2)return r?yn(e[0]):[];for(var i=-1,s=p(r);++i<r;)for(var o=e[i],f=-1;++f<r;)f!=i&&(s[i]=wt(s[i]||o,e[f],n,t));return yn(ve(s,1),n,t)}function vu(e,n,t){for(var r=-1,i=e.length,s=n.length,o={};++r<i;){var f=r<s?n[r]:a;t(o,e[r],f)}return o}function mi(e){return ce(e)?e:[]}function yi(e){return typeof e=="function"?e:Ee}function xn(e,n){return q(e)?e:Ti(e,n)?[e]:Ku(J(e))}var Xc=z;function An(e,n,t){var r=e.length;return t=t===a?r:t,!n&&t>=r?e:Ge(e,n,t)}var wu=Wf||function(e){return pe.clearTimeout(e)};function _u(e,n){if(n)return e.slice();var t=e.length,r=Na?Na(t):new e.constructor(t);return e.copy(r),r}function xi(e){var n=new e.constructor(e.byteLength);return new Gt(n).set(new Gt(e)),n}function kc(e,n){var t=n?xi(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.byteLength)}function Zc(e){var n=new e.constructor(e.source,na.exec(e));return n.lastIndex=e.lastIndex,n}function Yc(e){return pt?j(pt.call(e)):{}}function mu(e,n){var t=n?xi(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.length)}function yu(e,n){if(e!==n){var t=e!==a,r=e===null,i=e===e,s=We(e),o=n!==a,f=n===null,h=n===n,w=We(n);if(!f&&!w&&!s&&e>n||s&&o&&h&&!f&&!w||r&&o&&h||!t&&h||!i)return 1;if(!r&&!s&&!w&&e<n||w&&t&&i&&!r&&!s||f&&t&&i||!o&&i||!h)return-1}return 0}function Jc(e,n,t){for(var r=-1,i=e.criteria,s=n.criteria,o=i.length,f=t.length;++r<o;){var h=yu(i[r],s[r]);if(h){if(r>=f)return h;var w=t[r];return h*(w=="desc"?-1:1)}}return e.index-n.index}function xu(e,n,t,r){for(var i=-1,s=e.length,o=t.length,f=-1,h=n.length,w=ge(s-o,0),_=p(h+w),y=!r;++f<h;)_[f]=n[f];for(;++i<o;)(y||i<s)&&(_[t[i]]=e[i]);for(;w--;)_[f++]=e[i++];return _}function Au(e,n,t,r){for(var i=-1,s=e.length,o=-1,f=t.length,h=-1,w=n.length,_=ge(s-f,0),y=p(_+w),E=!r;++i<_;)y[i]=e[i];for(var O=i;++h<w;)y[O+h]=n[h];for(;++o<f;)(E||i<s)&&(y[O+t[o]]=e[i++]);return y}function be(e,n){var t=-1,r=e.length;for(n||(n=p(r));++t<r;)n[t]=e[t];return n}function nn(e,n,t,r){var i=!t;t||(t={});for(var s=-1,o=n.length;++s<o;){var f=n[s],h=r?r(t[f],e[f],f,t,e):a;h===a&&(h=e[f]),i?sn(t,f,h):vt(t,f,h)}return t}function Qc(e,n){return nn(e,Ri(e),n)}function Vc(e,n){return nn(e,Fu(e),n)}function rr(e,n){return function(t,r){var i=q(t)?tf:yc,s=n?n():{};return i(t,e,B(r,2),s)}}function Yn(e){return z(function(n,t){var r=-1,i=t.length,s=i>1?t[i-1]:a,o=i>2?t[2]:a;for(s=e.length>3&&typeof s=="function"?(i--,s):a,o&&xe(t[0],t[1],o)&&(s=i<3?a:s,i=1),n=j(n);++r<i;){var f=t[r];f&&e(n,f,r,s)}return n})}function Su(e,n){return function(t,r){if(t==null)return t;if(!Pe(t))return e(t,r);for(var i=t.length,s=n?i:-1,o=j(t);(n?s--:++s<i)&&r(o[s],s,o)!==!1;);return t}}function bu(e){return function(n,t,r){for(var i=-1,s=j(n),o=r(n),f=o.length;f--;){var h=o[e?f:++i];if(t(s[h],h,s)===!1)break}return n}}function jc(e,n,t){var r=n&W,i=xt(e);function s(){var o=this&&this!==pe&&this instanceof s?i:e;return o.apply(r?t:this,arguments)}return s}function Pu(e){return function(n){n=J(n);var t=Gn(n)?Ye(n):a,r=t?t[0]:n.charAt(0),i=t?An(t,1).join(""):n.slice(1);return r[e]()+i}}function Jn(e){return function(n){return Xr(Ss(As(n).replace(Go,"")),e,"")}}function xt(e){return function(){var n=arguments;switch(n.length){case 0:return new e;case 1:return new e(n[0]);case 2:return new e(n[0],n[1]);case 3:return new e(n[0],n[1],n[2]);case 4:return new e(n[0],n[1],n[2],n[3]);case 5:return new e(n[0],n[1],n[2],n[3],n[4]);case 6:return new e(n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return new e(n[0],n[1],n[2],n[3],n[4],n[5],n[6])}var t=Zn(e.prototype),r=e.apply(t,n);return ae(r)?r:t}}function el(e,n,t){var r=xt(e);function i(){for(var s=arguments.length,o=p(s),f=s,h=Qn(i);f--;)o[f]=arguments[f];var w=s<3&&o[0]!==h&&o[s-1]!==h?[]:wn(o,h);if(s-=w.length,s<t)return Lu(e,n,ir,i.placeholder,a,o,w,a,a,t-s);var _=this&&this!==pe&&this instanceof i?r:e;return Le(_,this,o)}return i}function Cu(e){return function(n,t,r){var i=j(n);if(!Pe(n)){var s=B(t,3);n=de(n),t=function(f){return s(i[f],f,i)}}var o=e(n,t,r);return o>-1?i[s?n[o]:o]:a}}function Eu(e){return fn(function(n){var t=n.length,r=t,i=$e.prototype.thru;for(e&&n.reverse();r--;){var s=n[r];if(typeof s!="function")throw new Ne(T);if(i&&!o&&or(s)=="wrapper")var o=new $e([],!0)}for(r=o?r:t;++r<t;){s=n[r];var f=or(s),h=f=="wrapper"?Ci(s):a;h&&Li(h[0])&&h[1]==(V|fe|K|te)&&!h[4].length&&h[9]==1?o=o[or(h[0])].apply(o,h[3]):o=s.length==1&&Li(s)?o[f]():o.thru(s)}return function(){var w=arguments,_=w[0];if(o&&w.length==1&&q(_))return o.plant(_).value();for(var y=0,E=t?n[y].apply(this,w):_;++y<t;)E=n[y].call(this,E);return E}})}function ir(e,n,t,r,i,s,o,f,h,w){var _=n&V,y=n&W,E=n&ee,O=n&(fe|N),D=n&we,H=E?a:xt(e);function U(){for(var X=arguments.length,Z=p(X),Me=X;Me--;)Z[Me]=arguments[Me];if(O)var Ae=Qn(U),Fe=hf(Z,Ae);if(r&&(Z=xu(Z,r,i,O)),s&&(Z=Au(Z,s,o,O)),X-=Fe,O&&X<w){var le=wn(Z,Ae);return Lu(e,n,ir,U.placeholder,t,Z,le,f,h,w-X)}var Ve=y?t:this,gn=E?Ve[e]:e;return X=Z.length,f?Z=yl(Z,f):D&&X>1&&Z.reverse(),_&&h<X&&(Z.length=h),this&&this!==pe&&this instanceof U&&(gn=H||xt(gn)),gn.apply(Ve,Z)}return U}function Ru(e,n){return function(t,r){return Rc(t,e,n(r),{})}}function ar(e,n){return function(t,r){var i;if(t===a&&r===a)return n;if(t!==a&&(i=t),r!==a){if(i===a)return r;typeof t=="string"||typeof r=="string"?(t=Oe(t),r=Oe(r)):(t=gu(t),r=gu(r)),i=e(t,r)}return i}}function Ai(e){return fn(function(n){return n=ie(n,Ie(B())),z(function(t){var r=this;return e(n,function(i){return Le(i,r,t)})})})}function ur(e,n){n=n===a?" ":Oe(n);var t=n.length;if(t<2)return t?pi(n,e):n;var r=pi(n,Xt(e/Hn(n)));return Gn(n)?An(Ye(r),0,e).join(""):r.slice(0,e)}function nl(e,n,t,r){var i=n&W,s=xt(e);function o(){for(var f=-1,h=arguments.length,w=-1,_=r.length,y=p(_+h),E=this&&this!==pe&&this instanceof o?s:e;++w<_;)y[w]=r[w];for(;h--;)y[w++]=arguments[++f];return Le(E,i?t:this,y)}return o}function Tu(e){return function(n,t,r){return r&&typeof r!="number"&&xe(n,t,r)&&(t=r=a),n=hn(n),t===a?(t=n,n=0):t=hn(t),r=r===a?n<t?1:-1:hn(r),$c(n,t,r,e)}}function sr(e){return function(n,t){return typeof n=="string"&&typeof t=="string"||(n=ze(n),t=ze(t)),e(n,t)}}function Lu(e,n,t,r,i,s,o,f,h,w){var _=n&fe,y=_?o:a,E=_?a:o,O=_?s:a,D=_?a:s;n|=_?K:ue,n&=~(_?ue:K),n&Re||(n&=-4);var H=[e,n,i,O,y,D,E,f,h,w],U=t.apply(a,H);return Li(e)&&Gu(U,H),U.placeholder=r,Hu(U,e,n)}function Si(e){var n=he[e];return function(t,r){if(t=ze(t),r=r==null?0:_e(G(r),292),r&&Ha(t)){var i=(J(t)+"e").split("e"),s=n(i[0]+"e"+(+i[1]+r));return i=(J(s)+"e").split("e"),+(i[0]+"e"+(+i[1]-r))}return n(t)}}var tl=Xn&&1/Bt(new Xn([,-0]))[1]==Cn?function(e){return new Xn(e)}:Ki;function Iu(e){return function(n){var t=me(n);return t==ke?jr(n):t==Ze?mf(n):lf(n,e(n))}}function on(e,n,t,r,i,s,o,f){var h=n&ee;if(!h&&typeof e!="function")throw new Ne(T);var w=r?r.length:0;if(w||(n&=-97,r=i=a),o=o===a?o:ge(G(o),0),f=f===a?f:G(f),w-=i?i.length:0,n&ue){var _=r,y=i;r=i=a}var E=h?a:Ci(e),O=[e,n,t,r,i,_,y,s,o,f];if(E&&wl(O,E),e=O[0],n=O[1],t=O[2],r=O[3],i=O[4],f=O[9]=O[9]===a?h?0:e.length:ge(O[9]-w,0),!f&&n&(fe|N)&&(n&=-25),!n||n==W)var D=jc(e,n,t);else n==fe||n==N?D=el(e,n,f):(n==K||n==(W|K))&&!i.length?D=nl(e,n,t,r):D=ir.apply(a,O);var H=E?lu:Gu;return Hu(H(D,O),e,n)}function Ou(e,n,t,r){return e===a||Qe(e,Kn[t])&&!Q.call(r,t)?n:e}function Wu(e,n,t,r,i,s){return ae(e)&&ae(n)&&(s.set(n,e),er(e,n,a,Wu,s),s.delete(n)),e}function rl(e){return bt(e)?a:e}function Mu(e,n,t,r,i,s){var o=t&F,f=e.length,h=n.length;if(f!=h&&!(o&&h>f))return!1;var w=s.get(e),_=s.get(n);if(w&&_)return w==n&&_==e;var y=-1,E=!0,O=t&oe?new Ln:a;for(s.set(e,n),s.set(n,e);++y<f;){var D=e[y],H=n[y];if(r)var U=o?r(H,D,y,n,e,s):r(D,H,y,e,n,s);if(U!==a){if(U)continue;E=!1;break}if(O){if(!kr(n,function(X,Z){if(!ct(O,Z)&&(D===X||i(D,X,t,r,s)))return O.push(Z)})){E=!1;break}}else if(!(D===H||i(D,H,t,r,s))){E=!1;break}}return s.delete(e),s.delete(n),E}function il(e,n,t,r,i,s,o){switch(t){case Nn:if(e.byteLength!=n.byteLength||e.byteOffset!=n.byteOffset)return!1;e=e.buffer,n=n.buffer;case ft:return!(e.byteLength!=n.byteLength||!s(new Gt(e),new Gt(n)));case rt:case it:case at:return Qe(+e,+n);case Rt:return e.name==n.name&&e.message==n.message;case ut:case st:return e==n+"";case ke:var f=jr;case Ze:var h=r&F;if(f||(f=Bt),e.size!=n.size&&!h)return!1;var w=o.get(e);if(w)return w==n;r|=oe,o.set(e,n);var _=Mu(f(e),f(n),r,i,s,o);return o.delete(e),_;case Lt:if(pt)return pt.call(e)==pt.call(n)}return!1}function al(e,n,t,r,i,s){var o=t&F,f=bi(e),h=f.length,w=bi(n),_=w.length;if(h!=_&&!o)return!1;for(var y=h;y--;){var E=f[y];if(!(o?E in n:Q.call(n,E)))return!1}var O=s.get(e),D=s.get(n);if(O&&D)return O==n&&D==e;var H=!0;s.set(e,n),s.set(n,e);for(var U=o;++y<h;){E=f[y];var X=e[E],Z=n[E];if(r)var Me=o?r(Z,X,E,n,e,s):r(X,Z,E,e,n,s);if(!(Me===a?X===Z||i(X,Z,t,r,s):Me)){H=!1;break}U||(U=E=="constructor")}if(H&&!U){var Ae=e.constructor,Fe=n.constructor;Ae!=Fe&&"constructor"in e&&"constructor"in n&&!(typeof Ae=="function"&&Ae instanceof Ae&&typeof Fe=="function"&&Fe instanceof Fe)&&(H=!1)}return s.delete(e),s.delete(n),H}function fn(e){return Oi($u(e,a,Yu),e+"")}function bi(e){return eu(e,de,Ri)}function Pi(e){return eu(e,Ce,Fu)}var Ci=Zt?function(e){return Zt.get(e)}:Ki;function or(e){for(var n=e.name+"",t=kn[n],r=Q.call(kn,n)?t.length:0;r--;){var i=t[r],s=i.func;if(s==null||s==e)return i.name}return n}function Qn(e){var n=Q.call(u,"placeholder")?u:e;return n.placeholder}function B(){var e=u.iteratee||Hi;return e=e===Hi?ru:e,arguments.length?e(arguments[0],arguments[1]):e}function fr(e,n){var t=e.__data__;return gl(n)?t[typeof n=="string"?"string":"hash"]:t.map}function Ei(e){for(var n=de(e),t=n.length;t--;){var r=n[t],i=e[r];n[t]=[r,i,Uu(i)]}return n}function Wn(e,n){var t=vf(e,n);return tu(t)?t:a}function ul(e){var n=Q.call(e,Rn),t=e[Rn];try{e[Rn]=a;var r=!0}catch{}var i=$t.call(e);return r&&(n?e[Rn]=t:delete e[Rn]),i}var Ri=ni?function(e){return e==null?[]:(e=j(e),pn(ni(e),function(n){return qa.call(e,n)}))}:Xi,Fu=ni?function(e){for(var n=[];e;)vn(n,Ri(e)),e=Ht(e);return n}:Xi,me=ye;(ti&&me(new ti(new ArrayBuffer(1)))!=Nn||ht&&me(new ht)!=ke||ri&&me(ri.resolve())!=Qi||Xn&&me(new Xn)!=Ze||gt&&me(new gt)!=ot)&&(me=function(e){var n=ye(e),t=n==rn?e.constructor:a,r=t?Mn(t):"";if(r)switch(r){case Gf:return Nn;case Hf:return ke;case zf:return Qi;case Kf:return Ze;case Xf:return ot}return n});function sl(e,n,t){for(var r=-1,i=t.length;++r<i;){var s=t[r],o=s.size;switch(s.type){case"drop":e+=o;break;case"dropRight":n-=o;break;case"take":n=_e(n,e+o);break;case"takeRight":e=ge(e,n-o);break}}return{start:e,end:n}}function ol(e){var n=e.match(ho);return n?n[1].split(go):[]}function Bu(e,n,t){n=xn(n,e);for(var r=-1,i=n.length,s=!1;++r<i;){var o=tn(n[r]);if(!(s=e!=null&&t(e,o)))break;e=e[o]}return s||++r!=i?s:(i=e==null?0:e.length,!!i&&vr(i)&&cn(o,i)&&(q(e)||Fn(e)))}function fl(e){var n=e.length,t=new e.constructor(n);return n&&typeof e[0]=="string"&&Q.call(e,"index")&&(t.index=e.index,t.input=e.input),t}function Du(e){return typeof e.constructor=="function"&&!At(e)?Zn(Ht(e)):{}}function cl(e,n,t){var r=e.constructor;switch(n){case ft:return xi(e);case rt:case it:return new r(+e);case Nn:return kc(e,t);case Er:case Rr:case Tr:case Lr:case Ir:case Or:case Wr:case Mr:case Fr:return mu(e,t);case ke:return new r;case at:case st:return new r(e);case ut:return Zc(e);case Ze:return new r;case Lt:return Yc(e)}}function ll(e,n){var t=n.length;if(!t)return e;var r=t-1;return n[r]=(t>1?"& ":"")+n[r],n=n.join(t>2?", ":" "),e.replace(lo,`{
/* [wrapped with `+n+`] */
`)}function hl(e){return q(e)||Fn(e)||!!(Ga&&e&&e[Ga])}function cn(e,n){var t=typeof e;return n=n??dn,!!n&&(t=="number"||t!="symbol"&&So.test(e))&&e>-1&&e%1==0&&e<n}function xe(e,n,t){if(!ae(t))return!1;var r=typeof n;return(r=="number"?Pe(t)&&cn(n,t.length):r=="string"&&n in t)?Qe(t[n],e):!1}function Ti(e,n){if(q(e))return!1;var t=typeof e;return t=="number"||t=="symbol"||t=="boolean"||e==null||We(e)?!0:so.test(e)||!uo.test(e)||n!=null&&e in j(n)}function gl(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}function Li(e){var n=or(e),t=u[n];if(typeof t!="function"||!(n in k.prototype))return!1;if(e===t)return!0;var r=Ci(t);return!!r&&e===r[0]}function dl(e){return!!Ua&&Ua in e}var pl=Ut?ln:ki;function At(e){var n=e&&e.constructor,t=typeof n=="function"&&n.prototype||Kn;return e===t}function Uu(e){return e===e&&!ae(e)}function Nu(e,n){return function(t){return t==null?!1:t[e]===n&&(n!==a||e in j(t))}}function vl(e){var n=dr(e,function(r){return t.size===A&&t.clear(),r}),t=n.cache;return n}function wl(e,n){var t=e[1],r=n[1],i=t|r,s=i<(W|ee|V),o=r==V&&t==fe||r==V&&t==te&&e[7].length<=n[8]||r==(V|te)&&n[7].length<=n[8]&&t==fe;if(!(s||o))return e;r&W&&(e[2]=n[2],i|=t&W?0:Re);var f=n[3];if(f){var h=e[3];e[3]=h?xu(h,f,n[4]):f,e[4]=h?wn(e[3],P):n[4]}return f=n[5],f&&(h=e[5],e[5]=h?Au(h,f,n[6]):f,e[6]=h?wn(e[5],P):n[6]),f=n[7],f&&(e[7]=f),r&V&&(e[8]=e[8]==null?n[8]:_e(e[8],n[8])),e[9]==null&&(e[9]=n[9]),e[0]=n[0],e[1]=i,e}function _l(e){var n=[];if(e!=null)for(var t in j(e))n.push(t);return n}function ml(e){return $t.call(e)}function $u(e,n,t){return n=ge(n===a?e.length-1:n,0),function(){for(var r=arguments,i=-1,s=ge(r.length-n,0),o=p(s);++i<s;)o[i]=r[n+i];i=-1;for(var f=p(n+1);++i<n;)f[i]=r[i];return f[n]=t(o),Le(e,this,f)}}function qu(e,n){return n.length<2?e:On(e,Ge(n,0,-1))}function yl(e,n){for(var t=e.length,r=_e(n.length,t),i=be(e);r--;){var s=n[r];e[r]=cn(s,t)?i[s]:a}return e}function Ii(e,n){if(!(n==="constructor"&&typeof e[n]=="function")&&n!="__proto__")return e[n]}var Gu=zu(lu),St=Ff||function(e,n){return pe.setTimeout(e,n)},Oi=zu(Hc);function Hu(e,n,t){var r=n+"";return Oi(e,ll(r,xl(ol(r),t)))}function zu(e){var n=0,t=0;return function(){var r=Nf(),i=Be-(r-t);if(t=r,i>0){if(++n>=Ke)return arguments[0]}else n=0;return e.apply(a,arguments)}}function cr(e,n){var t=-1,r=e.length,i=r-1;for(n=n===a?r:n;++t<n;){var s=di(t,i),o=e[s];e[s]=e[t],e[t]=o}return e.length=n,e}var Ku=vl(function(e){var n=[];return e.charCodeAt(0)===46&&n.push(""),e.replace(oo,function(t,r,i,s){n.push(i?s.replace(wo,"$1"):r||t)}),n});function tn(e){if(typeof e=="string"||We(e))return e;var n=e+"";return n=="0"&&1/e==-Cn?"-0":n}function Mn(e){if(e!=null){try{return Nt.call(e)}catch{}try{return e+""}catch{}}return""}function xl(e,n){return Ue(Xs,function(t){var r="_."+t[0];n&t[1]&&!Mt(e,r)&&e.push(r)}),e.sort()}function Xu(e){if(e instanceof k)return e.clone();var n=new $e(e.__wrapped__,e.__chain__);return n.__actions__=be(e.__actions__),n.__index__=e.__index__,n.__values__=e.__values__,n}function Al(e,n,t){(t?xe(e,n,t):n===a)?n=1:n=ge(G(n),0);var r=e==null?0:e.length;if(!r||n<1)return[];for(var i=0,s=0,o=p(Xt(r/n));i<r;)o[s++]=Ge(e,i,i+=n);return o}function Sl(e){for(var n=-1,t=e==null?0:e.length,r=0,i=[];++n<t;){var s=e[n];s&&(i[r++]=s)}return i}function bl(){var e=arguments.length;if(!e)return[];for(var n=p(e-1),t=arguments[0],r=e;r--;)n[r-1]=arguments[r];return vn(q(t)?be(t):[t],ve(n,1))}var Pl=z(function(e,n){return ce(e)?wt(e,ve(n,1,ce,!0)):[]}),Cl=z(function(e,n){var t=He(n);return ce(t)&&(t=a),ce(e)?wt(e,ve(n,1,ce,!0),B(t,2)):[]}),El=z(function(e,n){var t=He(n);return ce(t)&&(t=a),ce(e)?wt(e,ve(n,1,ce,!0),a,t):[]});function Rl(e,n,t){var r=e==null?0:e.length;return r?(n=t||n===a?1:G(n),Ge(e,n<0?0:n,r)):[]}function Tl(e,n,t){var r=e==null?0:e.length;return r?(n=t||n===a?1:G(n),n=r-n,Ge(e,0,n<0?0:n)):[]}function Ll(e,n){return e&&e.length?tr(e,B(n,3),!0,!0):[]}function Il(e,n){return e&&e.length?tr(e,B(n,3),!0):[]}function Ol(e,n,t,r){var i=e==null?0:e.length;return i?(t&&typeof t!="number"&&xe(e,n,t)&&(t=0,r=i),bc(e,n,t,r)):[]}function ku(e,n,t){var r=e==null?0:e.length;if(!r)return-1;var i=t==null?0:G(t);return i<0&&(i=ge(r+i,0)),Ft(e,B(n,3),i)}function Zu(e,n,t){var r=e==null?0:e.length;if(!r)return-1;var i=r-1;return t!==a&&(i=G(t),i=t<0?ge(r+i,0):_e(i,r-1)),Ft(e,B(n,3),i,!0)}function Yu(e){var n=e==null?0:e.length;return n?ve(e,1):[]}function Wl(e){var n=e==null?0:e.length;return n?ve(e,Cn):[]}function Ml(e,n){var t=e==null?0:e.length;return t?(n=n===a?1:G(n),ve(e,n)):[]}function Fl(e){for(var n=-1,t=e==null?0:e.length,r={};++n<t;){var i=e[n];r[i[0]]=i[1]}return r}function Ju(e){return e&&e.length?e[0]:a}function Bl(e,n,t){var r=e==null?0:e.length;if(!r)return-1;var i=t==null?0:G(t);return i<0&&(i=ge(r+i,0)),qn(e,n,i)}function Dl(e){var n=e==null?0:e.length;return n?Ge(e,0,-1):[]}var Ul=z(function(e){var n=ie(e,mi);return n.length&&n[0]===e[0]?fi(n):[]}),Nl=z(function(e){var n=He(e),t=ie(e,mi);return n===He(t)?n=a:t.pop(),t.length&&t[0]===e[0]?fi(t,B(n,2)):[]}),$l=z(function(e){var n=He(e),t=ie(e,mi);return n=typeof n=="function"?n:a,n&&t.pop(),t.length&&t[0]===e[0]?fi(t,a,n):[]});function ql(e,n){return e==null?"":Df.call(e,n)}function He(e){var n=e==null?0:e.length;return n?e[n-1]:a}function Gl(e,n,t){var r=e==null?0:e.length;if(!r)return-1;var i=r;return t!==a&&(i=G(t),i=i<0?ge(r+i,0):_e(i,r-1)),n===n?xf(e,n,i):Ft(e,La,i,!0)}function Hl(e,n){return e&&e.length?su(e,G(n)):a}var zl=z(Qu);function Qu(e,n){return e&&e.length&&n&&n.length?gi(e,n):e}function Kl(e,n,t){return e&&e.length&&n&&n.length?gi(e,n,B(t,2)):e}function Xl(e,n,t){return e&&e.length&&n&&n.length?gi(e,n,a,t):e}var kl=fn(function(e,n){var t=e==null?0:e.length,r=ai(e,n);return cu(e,ie(n,function(i){return cn(i,t)?+i:i}).sort(yu)),r});function Zl(e,n){var t=[];if(!(e&&e.length))return t;var r=-1,i=[],s=e.length;for(n=B(n,3);++r<s;){var o=e[r];n(o,r,e)&&(t.push(o),i.push(r))}return cu(e,i),t}function Wi(e){return e==null?e:qf.call(e)}function Yl(e,n,t){var r=e==null?0:e.length;return r?(t&&typeof t!="number"&&xe(e,n,t)?(n=0,t=r):(n=n==null?0:G(n),t=t===a?r:G(t)),Ge(e,n,t)):[]}function Jl(e,n){return nr(e,n)}function Ql(e,n,t){return vi(e,n,B(t,2))}function Vl(e,n){var t=e==null?0:e.length;if(t){var r=nr(e,n);if(r<t&&Qe(e[r],n))return r}return-1}function jl(e,n){return nr(e,n,!0)}function eh(e,n,t){return vi(e,n,B(t,2),!0)}function nh(e,n){var t=e==null?0:e.length;if(t){var r=nr(e,n,!0)-1;if(Qe(e[r],n))return r}return-1}function th(e){return e&&e.length?hu(e):[]}function rh(e,n){return e&&e.length?hu(e,B(n,2)):[]}function ih(e){var n=e==null?0:e.length;return n?Ge(e,1,n):[]}function ah(e,n,t){return e&&e.length?(n=t||n===a?1:G(n),Ge(e,0,n<0?0:n)):[]}function uh(e,n,t){var r=e==null?0:e.length;return r?(n=t||n===a?1:G(n),n=r-n,Ge(e,n<0?0:n,r)):[]}function sh(e,n){return e&&e.length?tr(e,B(n,3),!1,!0):[]}function oh(e,n){return e&&e.length?tr(e,B(n,3)):[]}var fh=z(function(e){return yn(ve(e,1,ce,!0))}),ch=z(function(e){var n=He(e);return ce(n)&&(n=a),yn(ve(e,1,ce,!0),B(n,2))}),lh=z(function(e){var n=He(e);return n=typeof n=="function"?n:a,yn(ve(e,1,ce,!0),a,n)});function hh(e){return e&&e.length?yn(e):[]}function gh(e,n){return e&&e.length?yn(e,B(n,2)):[]}function dh(e,n){return n=typeof n=="function"?n:a,e&&e.length?yn(e,a,n):[]}function Mi(e){if(!(e&&e.length))return[];var n=0;return e=pn(e,function(t){if(ce(t))return n=ge(t.length,n),!0}),Qr(n,function(t){return ie(e,Zr(t))})}function Vu(e,n){if(!(e&&e.length))return[];var t=Mi(e);return n==null?t:ie(t,function(r){return Le(n,a,r)})}var ph=z(function(e,n){return ce(e)?wt(e,n):[]}),vh=z(function(e){return _i(pn(e,ce))}),wh=z(function(e){var n=He(e);return ce(n)&&(n=a),_i(pn(e,ce),B(n,2))}),_h=z(function(e){var n=He(e);return n=typeof n=="function"?n:a,_i(pn(e,ce),a,n)}),mh=z(Mi);function yh(e,n){return vu(e||[],n||[],vt)}function xh(e,n){return vu(e||[],n||[],yt)}var Ah=z(function(e){var n=e.length,t=n>1?e[n-1]:a;return t=typeof t=="function"?(e.pop(),t):a,Vu(e,t)});function ju(e){var n=u(e);return n.__chain__=!0,n}function Sh(e,n){return n(e),e}function lr(e,n){return n(e)}var bh=fn(function(e){var n=e.length,t=n?e[0]:0,r=this.__wrapped__,i=function(s){return ai(s,e)};return n>1||this.__actions__.length||!(r instanceof k)||!cn(t)?this.thru(i):(r=r.slice(t,+t+(n?1:0)),r.__actions__.push({func:lr,args:[i],thisArg:a}),new $e(r,this.__chain__).thru(function(s){return n&&!s.length&&s.push(a),s}))});function Ph(){return ju(this)}function Ch(){return new $e(this.value(),this.__chain__)}function Eh(){this.__values__===a&&(this.__values__=gs(this.value()));var e=this.__index__>=this.__values__.length,n=e?a:this.__values__[this.__index__++];return{done:e,value:n}}function Rh(){return this}function Th(e){for(var n,t=this;t instanceof Jt;){var r=Xu(t);r.__index__=0,r.__values__=a,n?i.__wrapped__=r:n=r;var i=r;t=t.__wrapped__}return i.__wrapped__=e,n}function Lh(){var e=this.__wrapped__;if(e instanceof k){var n=e;return this.__actions__.length&&(n=new k(this)),n=n.reverse(),n.__actions__.push({func:lr,args:[Wi],thisArg:a}),new $e(n,this.__chain__)}return this.thru(Wi)}function Ih(){return pu(this.__wrapped__,this.__actions__)}var Oh=rr(function(e,n,t){Q.call(e,t)?++e[t]:sn(e,t,1)});function Wh(e,n,t){var r=q(e)?Ra:Sc;return t&&xe(e,n,t)&&(n=a),r(e,B(n,3))}function Mh(e,n){var t=q(e)?pn:Va;return t(e,B(n,3))}var Fh=Cu(ku),Bh=Cu(Zu);function Dh(e,n){return ve(hr(e,n),1)}function Uh(e,n){return ve(hr(e,n),Cn)}function Nh(e,n,t){return t=t===a?1:G(t),ve(hr(e,n),t)}function es(e,n){var t=q(e)?Ue:mn;return t(e,B(n,3))}function ns(e,n){var t=q(e)?rf:Qa;return t(e,B(n,3))}var $h=rr(function(e,n,t){Q.call(e,t)?e[t].push(n):sn(e,t,[n])});function qh(e,n,t,r){e=Pe(e)?e:jn(e),t=t&&!r?G(t):0;var i=e.length;return t<0&&(t=ge(i+t,0)),wr(e)?t<=i&&e.indexOf(n,t)>-1:!!i&&qn(e,n,t)>-1}var Gh=z(function(e,n,t){var r=-1,i=typeof n=="function",s=Pe(e)?p(e.length):[];return mn(e,function(o){s[++r]=i?Le(n,o,t):_t(o,n,t)}),s}),Hh=rr(function(e,n,t){sn(e,t,n)});function hr(e,n){var t=q(e)?ie:iu;return t(e,B(n,3))}function zh(e,n,t,r){return e==null?[]:(q(n)||(n=n==null?[]:[n]),t=r?a:t,q(t)||(t=t==null?[]:[t]),ou(e,n,t))}var Kh=rr(function(e,n,t){e[t?0:1].push(n)},function(){return[[],[]]});function Xh(e,n,t){var r=q(e)?Xr:Oa,i=arguments.length<3;return r(e,B(n,4),t,i,mn)}function kh(e,n,t){var r=q(e)?af:Oa,i=arguments.length<3;return r(e,B(n,4),t,i,Qa)}function Zh(e,n){var t=q(e)?pn:Va;return t(e,pr(B(n,3)))}function Yh(e){var n=q(e)?ka:qc;return n(e)}function Jh(e,n,t){(t?xe(e,n,t):n===a)?n=1:n=G(n);var r=q(e)?_c:Gc;return r(e,n)}function Qh(e){var n=q(e)?mc:zc;return n(e)}function Vh(e){if(e==null)return 0;if(Pe(e))return wr(e)?Hn(e):e.length;var n=me(e);return n==ke||n==Ze?e.size:li(e).length}function jh(e,n,t){var r=q(e)?kr:Kc;return t&&xe(e,n,t)&&(n=a),r(e,B(n,3))}var eg=z(function(e,n){if(e==null)return[];var t=n.length;return t>1&&xe(e,n[0],n[1])?n=[]:t>2&&xe(n[0],n[1],n[2])&&(n=[n[0]]),ou(e,ve(n,1),[])}),gr=Mf||function(){return pe.Date.now()};function ng(e,n){if(typeof n!="function")throw new Ne(T);return e=G(e),function(){if(--e<1)return n.apply(this,arguments)}}function ts(e,n,t){return n=t?a:n,n=e&&n==null?e.length:n,on(e,V,a,a,a,a,n)}function rs(e,n){var t;if(typeof n!="function")throw new Ne(T);return e=G(e),function(){return--e>0&&(t=n.apply(this,arguments)),e<=1&&(n=a),t}}var Fi=z(function(e,n,t){var r=W;if(t.length){var i=wn(t,Qn(Fi));r|=K}return on(e,r,n,t,i)}),is=z(function(e,n,t){var r=W|ee;if(t.length){var i=wn(t,Qn(is));r|=K}return on(n,r,e,t,i)});function as(e,n,t){n=t?a:n;var r=on(e,fe,a,a,a,a,a,n);return r.placeholder=as.placeholder,r}function us(e,n,t){n=t?a:n;var r=on(e,N,a,a,a,a,a,n);return r.placeholder=us.placeholder,r}function ss(e,n,t){var r,i,s,o,f,h,w=0,_=!1,y=!1,E=!0;if(typeof e!="function")throw new Ne(T);n=ze(n)||0,ae(t)&&(_=!!t.leading,y="maxWait"in t,s=y?ge(ze(t.maxWait)||0,n):s,E="trailing"in t?!!t.trailing:E);function O(le){var Ve=r,gn=i;return r=i=a,w=le,o=e.apply(gn,Ve),o}function D(le){return w=le,f=St(X,n),_?O(le):o}function H(le){var Ve=le-h,gn=le-w,Cs=n-Ve;return y?_e(Cs,s-gn):Cs}function U(le){var Ve=le-h,gn=le-w;return h===a||Ve>=n||Ve<0||y&&gn>=s}function X(){var le=gr();if(U(le))return Z(le);f=St(X,H(le))}function Z(le){return f=a,E&&r?O(le):(r=i=a,o)}function Me(){f!==a&&wu(f),w=0,r=h=i=f=a}function Ae(){return f===a?o:Z(gr())}function Fe(){var le=gr(),Ve=U(le);if(r=arguments,i=this,h=le,Ve){if(f===a)return D(h);if(y)return wu(f),f=St(X,n),O(h)}return f===a&&(f=St(X,n)),o}return Fe.cancel=Me,Fe.flush=Ae,Fe}var tg=z(function(e,n){return Ja(e,1,n)}),rg=z(function(e,n,t){return Ja(e,ze(n)||0,t)});function ig(e){return on(e,we)}function dr(e,n){if(typeof e!="function"||n!=null&&typeof n!="function")throw new Ne(T);var t=function(){var r=arguments,i=n?n.apply(this,r):r[0],s=t.cache;if(s.has(i))return s.get(i);var o=e.apply(this,r);return t.cache=s.set(i,o)||s,o};return t.cache=new(dr.Cache||un),t}dr.Cache=un;function pr(e){if(typeof e!="function")throw new Ne(T);return function(){var n=arguments;switch(n.length){case 0:return!e.call(this);case 1:return!e.call(this,n[0]);case 2:return!e.call(this,n[0],n[1]);case 3:return!e.call(this,n[0],n[1],n[2])}return!e.apply(this,n)}}function ag(e){return rs(2,e)}var ug=Xc(function(e,n){n=n.length==1&&q(n[0])?ie(n[0],Ie(B())):ie(ve(n,1),Ie(B()));var t=n.length;return z(function(r){for(var i=-1,s=_e(r.length,t);++i<s;)r[i]=n[i].call(this,r[i]);return Le(e,this,r)})}),Bi=z(function(e,n){var t=wn(n,Qn(Bi));return on(e,K,a,n,t)}),os=z(function(e,n){var t=wn(n,Qn(os));return on(e,ue,a,n,t)}),sg=fn(function(e,n){return on(e,te,a,a,a,n)});function og(e,n){if(typeof e!="function")throw new Ne(T);return n=n===a?n:G(n),z(e,n)}function fg(e,n){if(typeof e!="function")throw new Ne(T);return n=n==null?0:ge(G(n),0),z(function(t){var r=t[n],i=An(t,0,n);return r&&vn(i,r),Le(e,this,i)})}function cg(e,n,t){var r=!0,i=!0;if(typeof e!="function")throw new Ne(T);return ae(t)&&(r="leading"in t?!!t.leading:r,i="trailing"in t?!!t.trailing:i),ss(e,n,{leading:r,maxWait:n,trailing:i})}function lg(e){return ts(e,1)}function hg(e,n){return Bi(yi(n),e)}function gg(){if(!arguments.length)return[];var e=arguments[0];return q(e)?e:[e]}function dg(e){return qe(e,C)}function pg(e,n){return n=typeof n=="function"?n:a,qe(e,C,n)}function vg(e){return qe(e,m|C)}function wg(e,n){return n=typeof n=="function"?n:a,qe(e,m|C,n)}function _g(e,n){return n==null||Ya(e,n,de(n))}function Qe(e,n){return e===n||e!==e&&n!==n}var mg=sr(oi),yg=sr(function(e,n){return e>=n}),Fn=nu(function(){return arguments}())?nu:function(e){return se(e)&&Q.call(e,"callee")&&!qa.call(e,"callee")},q=p.isArray,xg=Aa?Ie(Aa):Tc;function Pe(e){return e!=null&&vr(e.length)&&!ln(e)}function ce(e){return se(e)&&Pe(e)}function Ag(e){return e===!0||e===!1||se(e)&&ye(e)==rt}var Sn=Bf||ki,Sg=Sa?Ie(Sa):Lc;function bg(e){return se(e)&&e.nodeType===1&&!bt(e)}function Pg(e){if(e==null)return!0;if(Pe(e)&&(q(e)||typeof e=="string"||typeof e.splice=="function"||Sn(e)||Vn(e)||Fn(e)))return!e.length;var n=me(e);if(n==ke||n==Ze)return!e.size;if(At(e))return!li(e).length;for(var t in e)if(Q.call(e,t))return!1;return!0}function Cg(e,n){return mt(e,n)}function Eg(e,n,t){t=typeof t=="function"?t:a;var r=t?t(e,n):a;return r===a?mt(e,n,a,t):!!r}function Di(e){if(!se(e))return!1;var n=ye(e);return n==Rt||n==Zs||typeof e.message=="string"&&typeof e.name=="string"&&!bt(e)}function Rg(e){return typeof e=="number"&&Ha(e)}function ln(e){if(!ae(e))return!1;var n=ye(e);return n==Tt||n==Ji||n==ks||n==Js}function fs(e){return typeof e=="number"&&e==G(e)}function vr(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=dn}function ae(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}function se(e){return e!=null&&typeof e=="object"}var cs=ba?Ie(ba):Oc;function Tg(e,n){return e===n||ci(e,n,Ei(n))}function Lg(e,n,t){return t=typeof t=="function"?t:a,ci(e,n,Ei(n),t)}function Ig(e){return ls(e)&&e!=+e}function Og(e){if(pl(e))throw new $(S);return tu(e)}function Wg(e){return e===null}function Mg(e){return e==null}function ls(e){return typeof e=="number"||se(e)&&ye(e)==at}function bt(e){if(!se(e)||ye(e)!=rn)return!1;var n=Ht(e);if(n===null)return!0;var t=Q.call(n,"constructor")&&n.constructor;return typeof t=="function"&&t instanceof t&&Nt.call(t)==Lf}var Ui=Pa?Ie(Pa):Wc;function Fg(e){return fs(e)&&e>=-dn&&e<=dn}var hs=Ca?Ie(Ca):Mc;function wr(e){return typeof e=="string"||!q(e)&&se(e)&&ye(e)==st}function We(e){return typeof e=="symbol"||se(e)&&ye(e)==Lt}var Vn=Ea?Ie(Ea):Fc;function Bg(e){return e===a}function Dg(e){return se(e)&&me(e)==ot}function Ug(e){return se(e)&&ye(e)==Vs}var Ng=sr(hi),$g=sr(function(e,n){return e<=n});function gs(e){if(!e)return[];if(Pe(e))return wr(e)?Ye(e):be(e);if(lt&&e[lt])return _f(e[lt]());var n=me(e),t=n==ke?jr:n==Ze?Bt:jn;return t(e)}function hn(e){if(!e)return e===0?e:0;if(e=ze(e),e===Cn||e===-Cn){var n=e<0?-1:1;return n*Hs}return e===e?e:0}function G(e){var n=hn(e),t=n%1;return n===n?t?n-t:n:0}function ds(e){return e?In(G(e),0,je):0}function ze(e){if(typeof e=="number")return e;if(We(e))return Ct;if(ae(e)){var n=typeof e.valueOf=="function"?e.valueOf():e;e=ae(n)?n+"":n}if(typeof e!="string")return e===0?e:+e;e=Wa(e);var t=yo.test(e);return t||Ao.test(e)?ef(e.slice(2),t?2:8):mo.test(e)?Ct:+e}function ps(e){return nn(e,Ce(e))}function qg(e){return e?In(G(e),-dn,dn):e===0?e:0}function J(e){return e==null?"":Oe(e)}var Gg=Yn(function(e,n){if(At(n)||Pe(n)){nn(n,de(n),e);return}for(var t in n)Q.call(n,t)&&vt(e,t,n[t])}),vs=Yn(function(e,n){nn(n,Ce(n),e)}),_r=Yn(function(e,n,t,r){nn(n,Ce(n),e,r)}),Hg=Yn(function(e,n,t,r){nn(n,de(n),e,r)}),zg=fn(ai);function Kg(e,n){var t=Zn(e);return n==null?t:Za(t,n)}var Xg=z(function(e,n){e=j(e);var t=-1,r=n.length,i=r>2?n[2]:a;for(i&&xe(n[0],n[1],i)&&(r=1);++t<r;)for(var s=n[t],o=Ce(s),f=-1,h=o.length;++f<h;){var w=o[f],_=e[w];(_===a||Qe(_,Kn[w])&&!Q.call(e,w))&&(e[w]=s[w])}return e}),kg=z(function(e){return e.push(a,Wu),Le(ws,a,e)});function Zg(e,n){return Ta(e,B(n,3),en)}function Yg(e,n){return Ta(e,B(n,3),si)}function Jg(e,n){return e==null?e:ui(e,B(n,3),Ce)}function Qg(e,n){return e==null?e:ja(e,B(n,3),Ce)}function Vg(e,n){return e&&en(e,B(n,3))}function jg(e,n){return e&&si(e,B(n,3))}function ed(e){return e==null?[]:jt(e,de(e))}function nd(e){return e==null?[]:jt(e,Ce(e))}function Ni(e,n,t){var r=e==null?a:On(e,n);return r===a?t:r}function td(e,n){return e!=null&&Bu(e,n,Pc)}function $i(e,n){return e!=null&&Bu(e,n,Cc)}var rd=Ru(function(e,n,t){n!=null&&typeof n.toString!="function"&&(n=$t.call(n)),e[n]=t},Gi(Ee)),id=Ru(function(e,n,t){n!=null&&typeof n.toString!="function"&&(n=$t.call(n)),Q.call(e,n)?e[n].push(t):e[n]=[t]},B),ad=z(_t);function de(e){return Pe(e)?Xa(e):li(e)}function Ce(e){return Pe(e)?Xa(e,!0):Bc(e)}function ud(e,n){var t={};return n=B(n,3),en(e,function(r,i,s){sn(t,n(r,i,s),r)}),t}function sd(e,n){var t={};return n=B(n,3),en(e,function(r,i,s){sn(t,i,n(r,i,s))}),t}var od=Yn(function(e,n,t){er(e,n,t)}),ws=Yn(function(e,n,t,r){er(e,n,t,r)}),fd=fn(function(e,n){var t={};if(e==null)return t;var r=!1;n=ie(n,function(s){return s=xn(s,e),r||(r=s.length>1),s}),nn(e,Pi(e),t),r&&(t=qe(t,m|x|C,rl));for(var i=n.length;i--;)wi(t,n[i]);return t});function cd(e,n){return _s(e,pr(B(n)))}var ld=fn(function(e,n){return e==null?{}:Uc(e,n)});function _s(e,n){if(e==null)return{};var t=ie(Pi(e),function(r){return[r]});return n=B(n),fu(e,t,function(r,i){return n(r,i[0])})}function hd(e,n,t){n=xn(n,e);var r=-1,i=n.length;for(i||(i=1,e=a);++r<i;){var s=e==null?a:e[tn(n[r])];s===a&&(r=i,s=t),e=ln(s)?s.call(e):s}return e}function gd(e,n,t){return e==null?e:yt(e,n,t)}function dd(e,n,t,r){return r=typeof r=="function"?r:a,e==null?e:yt(e,n,t,r)}var ms=Iu(de),ys=Iu(Ce);function pd(e,n,t){var r=q(e),i=r||Sn(e)||Vn(e);if(n=B(n,4),t==null){var s=e&&e.constructor;i?t=r?new s:[]:ae(e)?t=ln(s)?Zn(Ht(e)):{}:t={}}return(i?Ue:en)(e,function(o,f,h){return n(t,o,f,h)}),t}function vd(e,n){return e==null?!0:wi(e,n)}function wd(e,n,t){return e==null?e:du(e,n,yi(t))}function _d(e,n,t,r){return r=typeof r=="function"?r:a,e==null?e:du(e,n,yi(t),r)}function jn(e){return e==null?[]:Vr(e,de(e))}function md(e){return e==null?[]:Vr(e,Ce(e))}function yd(e,n,t){return t===a&&(t=n,n=a),t!==a&&(t=ze(t),t=t===t?t:0),n!==a&&(n=ze(n),n=n===n?n:0),In(ze(e),n,t)}function xd(e,n,t){return n=hn(n),t===a?(t=n,n=0):t=hn(t),e=ze(e),Ec(e,n,t)}function Ad(e,n,t){if(t&&typeof t!="boolean"&&xe(e,n,t)&&(n=t=a),t===a&&(typeof n=="boolean"?(t=n,n=a):typeof e=="boolean"&&(t=e,e=a)),e===a&&n===a?(e=0,n=1):(e=hn(e),n===a?(n=e,e=0):n=hn(n)),e>n){var r=e;e=n,n=r}if(t||e%1||n%1){var i=za();return _e(e+i*(n-e+jo("1e-"+((i+"").length-1))),n)}return di(e,n)}var Sd=Jn(function(e,n,t){return n=n.toLowerCase(),e+(t?xs(n):n)});function xs(e){return qi(J(e).toLowerCase())}function As(e){return e=J(e),e&&e.replace(bo,gf).replace(Ho,"")}function bd(e,n,t){e=J(e),n=Oe(n);var r=e.length;t=t===a?r:In(G(t),0,r);var i=t;return t-=n.length,t>=0&&e.slice(t,i)==n}function Pd(e){return e=J(e),e&&ro.test(e)?e.replace(ji,df):e}function Cd(e){return e=J(e),e&&fo.test(e)?e.replace(Br,"\\$&"):e}var Ed=Jn(function(e,n,t){return e+(t?"-":"")+n.toLowerCase()}),Rd=Jn(function(e,n,t){return e+(t?" ":"")+n.toLowerCase()}),Td=Pu("toLowerCase");function Ld(e,n,t){e=J(e),n=G(n);var r=n?Hn(e):0;if(!n||r>=n)return e;var i=(n-r)/2;return ur(kt(i),t)+e+ur(Xt(i),t)}function Id(e,n,t){e=J(e),n=G(n);var r=n?Hn(e):0;return n&&r<n?e+ur(n-r,t):e}function Od(e,n,t){e=J(e),n=G(n);var r=n?Hn(e):0;return n&&r<n?ur(n-r,t)+e:e}function Wd(e,n,t){return t||n==null?n=0:n&&(n=+n),$f(J(e).replace(Dr,""),n||0)}function Md(e,n,t){return(t?xe(e,n,t):n===a)?n=1:n=G(n),pi(J(e),n)}function Fd(){var e=arguments,n=J(e[0]);return e.length<3?n:n.replace(e[1],e[2])}var Bd=Jn(function(e,n,t){return e+(t?"_":"")+n.toLowerCase()});function Dd(e,n,t){return t&&typeof t!="number"&&xe(e,n,t)&&(n=t=a),t=t===a?je:t>>>0,t?(e=J(e),e&&(typeof n=="string"||n!=null&&!Ui(n))&&(n=Oe(n),!n&&Gn(e))?An(Ye(e),0,t):e.split(n,t)):[]}var Ud=Jn(function(e,n,t){return e+(t?" ":"")+qi(n)});function Nd(e,n,t){return e=J(e),t=t==null?0:In(G(t),0,e.length),n=Oe(n),e.slice(t,t+n.length)==n}function $d(e,n,t){var r=u.templateSettings;t&&xe(e,n,t)&&(n=a),e=J(e),n=_r({},n,r,Ou);var i=_r({},n.imports,r.imports,Ou),s=de(i),o=Vr(i,s),f,h,w=0,_=n.interpolate||It,y="__p += '",E=ei((n.escape||It).source+"|"+_.source+"|"+(_===ea?_o:It).source+"|"+(n.evaluate||It).source+"|$","g"),O="//# sourceURL="+(Q.call(n,"sourceURL")?(n.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Zo+"]")+`
`;e.replace(E,function(U,X,Z,Me,Ae,Fe){return Z||(Z=Me),y+=e.slice(w,Fe).replace(Po,pf),X&&(f=!0,y+=`' +
__e(`+X+`) +
'`),Ae&&(h=!0,y+=`';
`+Ae+`;
__p += '`),Z&&(y+=`' +
((__t = (`+Z+`)) == null ? '' : __t) +
'`),w=Fe+U.length,U}),y+=`';
`;var D=Q.call(n,"variable")&&n.variable;if(!D)y=`with (obj) {
`+y+`
}
`;else if(vo.test(D))throw new $(R);y=(h?y.replace(js,""):y).replace(eo,"$1").replace(no,"$1;"),y="function("+(D||"obj")+`) {
`+(D?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(f?", __e = _.escape":"")+(h?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+y+`return __p
}`;var H=bs(function(){return Y(s,O+"return "+y).apply(a,o)});if(H.source=y,Di(H))throw H;return H}function qd(e){return J(e).toLowerCase()}function Gd(e){return J(e).toUpperCase()}function Hd(e,n,t){if(e=J(e),e&&(t||n===a))return Wa(e);if(!e||!(n=Oe(n)))return e;var r=Ye(e),i=Ye(n),s=Ma(r,i),o=Fa(r,i)+1;return An(r,s,o).join("")}function zd(e,n,t){if(e=J(e),e&&(t||n===a))return e.slice(0,Da(e)+1);if(!e||!(n=Oe(n)))return e;var r=Ye(e),i=Fa(r,Ye(n))+1;return An(r,0,i).join("")}function Kd(e,n,t){if(e=J(e),e&&(t||n===a))return e.replace(Dr,"");if(!e||!(n=Oe(n)))return e;var r=Ye(e),i=Ma(r,Ye(n));return An(r,i).join("")}function Xd(e,n){var t=Te,r=Se;if(ae(n)){var i="separator"in n?n.separator:i;t="length"in n?G(n.length):t,r="omission"in n?Oe(n.omission):r}e=J(e);var s=e.length;if(Gn(e)){var o=Ye(e);s=o.length}if(t>=s)return e;var f=t-Hn(r);if(f<1)return r;var h=o?An(o,0,f).join(""):e.slice(0,f);if(i===a)return h+r;if(o&&(f+=h.length-f),Ui(i)){if(e.slice(f).search(i)){var w,_=h;for(i.global||(i=ei(i.source,J(na.exec(i))+"g")),i.lastIndex=0;w=i.exec(_);)var y=w.index;h=h.slice(0,y===a?f:y)}}else if(e.indexOf(Oe(i),f)!=f){var E=h.lastIndexOf(i);E>-1&&(h=h.slice(0,E))}return h+r}function kd(e){return e=J(e),e&&to.test(e)?e.replace(Vi,Af):e}var Zd=Jn(function(e,n,t){return e+(t?" ":"")+n.toUpperCase()}),qi=Pu("toUpperCase");function Ss(e,n,t){return e=J(e),n=t?a:n,n===a?wf(e)?Pf(e):of(e):e.match(n)||[]}var bs=z(function(e,n){try{return Le(e,a,n)}catch(t){return Di(t)?t:new $(t)}}),Yd=fn(function(e,n){return Ue(n,function(t){t=tn(t),sn(e,t,Fi(e[t],e))}),e});function Jd(e){var n=e==null?0:e.length,t=B();return e=n?ie(e,function(r){if(typeof r[1]!="function")throw new Ne(T);return[t(r[0]),r[1]]}):[],z(function(r){for(var i=-1;++i<n;){var s=e[i];if(Le(s[0],this,r))return Le(s[1],this,r)}})}function Qd(e){return Ac(qe(e,m))}function Gi(e){return function(){return e}}function Vd(e,n){return e==null||e!==e?n:e}var jd=Eu(),ep=Eu(!0);function Ee(e){return e}function Hi(e){return ru(typeof e=="function"?e:qe(e,m))}function np(e){return au(qe(e,m))}function tp(e,n){return uu(e,qe(n,m))}var rp=z(function(e,n){return function(t){return _t(t,e,n)}}),ip=z(function(e,n){return function(t){return _t(e,t,n)}});function zi(e,n,t){var r=de(n),i=jt(n,r);t==null&&!(ae(n)&&(i.length||!r.length))&&(t=n,n=e,e=this,i=jt(n,de(n)));var s=!(ae(t)&&"chain"in t)||!!t.chain,o=ln(e);return Ue(i,function(f){var h=n[f];e[f]=h,o&&(e.prototype[f]=function(){var w=this.__chain__;if(s||w){var _=e(this.__wrapped__),y=_.__actions__=be(this.__actions__);return y.push({func:h,args:arguments,thisArg:e}),_.__chain__=w,_}return h.apply(e,vn([this.value()],arguments))})}),e}function ap(){return pe._===this&&(pe._=If),this}function Ki(){}function up(e){return e=G(e),z(function(n){return su(n,e)})}var sp=Ai(ie),op=Ai(Ra),fp=Ai(kr);function Ps(e){return Ti(e)?Zr(tn(e)):Nc(e)}function cp(e){return function(n){return e==null?a:On(e,n)}}var lp=Tu(),hp=Tu(!0);function Xi(){return[]}function ki(){return!1}function gp(){return{}}function dp(){return""}function pp(){return!0}function vp(e,n){if(e=G(e),e<1||e>dn)return[];var t=je,r=_e(e,je);n=B(n),e-=je;for(var i=Qr(r,n);++t<e;)n(t);return i}function wp(e){return q(e)?ie(e,tn):We(e)?[e]:be(Ku(J(e)))}function _p(e){var n=++Tf;return J(e)+n}var mp=ar(function(e,n){return e+n},0),yp=Si("ceil"),xp=ar(function(e,n){return e/n},1),Ap=Si("floor");function Sp(e){return e&&e.length?Vt(e,Ee,oi):a}function bp(e,n){return e&&e.length?Vt(e,B(n,2),oi):a}function Pp(e){return Ia(e,Ee)}function Cp(e,n){return Ia(e,B(n,2))}function Ep(e){return e&&e.length?Vt(e,Ee,hi):a}function Rp(e,n){return e&&e.length?Vt(e,B(n,2),hi):a}var Tp=ar(function(e,n){return e*n},1),Lp=Si("round"),Ip=ar(function(e,n){return e-n},0);function Op(e){return e&&e.length?Jr(e,Ee):0}function Wp(e,n){return e&&e.length?Jr(e,B(n,2)):0}return u.after=ng,u.ary=ts,u.assign=Gg,u.assignIn=vs,u.assignInWith=_r,u.assignWith=Hg,u.at=zg,u.before=rs,u.bind=Fi,u.bindAll=Yd,u.bindKey=is,u.castArray=gg,u.chain=ju,u.chunk=Al,u.compact=Sl,u.concat=bl,u.cond=Jd,u.conforms=Qd,u.constant=Gi,u.countBy=Oh,u.create=Kg,u.curry=as,u.curryRight=us,u.debounce=ss,u.defaults=Xg,u.defaultsDeep=kg,u.defer=tg,u.delay=rg,u.difference=Pl,u.differenceBy=Cl,u.differenceWith=El,u.drop=Rl,u.dropRight=Tl,u.dropRightWhile=Ll,u.dropWhile=Il,u.fill=Ol,u.filter=Mh,u.flatMap=Dh,u.flatMapDeep=Uh,u.flatMapDepth=Nh,u.flatten=Yu,u.flattenDeep=Wl,u.flattenDepth=Ml,u.flip=ig,u.flow=jd,u.flowRight=ep,u.fromPairs=Fl,u.functions=ed,u.functionsIn=nd,u.groupBy=$h,u.initial=Dl,u.intersection=Ul,u.intersectionBy=Nl,u.intersectionWith=$l,u.invert=rd,u.invertBy=id,u.invokeMap=Gh,u.iteratee=Hi,u.keyBy=Hh,u.keys=de,u.keysIn=Ce,u.map=hr,u.mapKeys=ud,u.mapValues=sd,u.matches=np,u.matchesProperty=tp,u.memoize=dr,u.merge=od,u.mergeWith=ws,u.method=rp,u.methodOf=ip,u.mixin=zi,u.negate=pr,u.nthArg=up,u.omit=fd,u.omitBy=cd,u.once=ag,u.orderBy=zh,u.over=sp,u.overArgs=ug,u.overEvery=op,u.overSome=fp,u.partial=Bi,u.partialRight=os,u.partition=Kh,u.pick=ld,u.pickBy=_s,u.property=Ps,u.propertyOf=cp,u.pull=zl,u.pullAll=Qu,u.pullAllBy=Kl,u.pullAllWith=Xl,u.pullAt=kl,u.range=lp,u.rangeRight=hp,u.rearg=sg,u.reject=Zh,u.remove=Zl,u.rest=og,u.reverse=Wi,u.sampleSize=Jh,u.set=gd,u.setWith=dd,u.shuffle=Qh,u.slice=Yl,u.sortBy=eg,u.sortedUniq=th,u.sortedUniqBy=rh,u.split=Dd,u.spread=fg,u.tail=ih,u.take=ah,u.takeRight=uh,u.takeRightWhile=sh,u.takeWhile=oh,u.tap=Sh,u.throttle=cg,u.thru=lr,u.toArray=gs,u.toPairs=ms,u.toPairsIn=ys,u.toPath=wp,u.toPlainObject=ps,u.transform=pd,u.unary=lg,u.union=fh,u.unionBy=ch,u.unionWith=lh,u.uniq=hh,u.uniqBy=gh,u.uniqWith=dh,u.unset=vd,u.unzip=Mi,u.unzipWith=Vu,u.update=wd,u.updateWith=_d,u.values=jn,u.valuesIn=md,u.without=ph,u.words=Ss,u.wrap=hg,u.xor=vh,u.xorBy=wh,u.xorWith=_h,u.zip=mh,u.zipObject=yh,u.zipObjectDeep=xh,u.zipWith=Ah,u.entries=ms,u.entriesIn=ys,u.extend=vs,u.extendWith=_r,zi(u,u),u.add=mp,u.attempt=bs,u.camelCase=Sd,u.capitalize=xs,u.ceil=yp,u.clamp=yd,u.clone=dg,u.cloneDeep=vg,u.cloneDeepWith=wg,u.cloneWith=pg,u.conformsTo=_g,u.deburr=As,u.defaultTo=Vd,u.divide=xp,u.endsWith=bd,u.eq=Qe,u.escape=Pd,u.escapeRegExp=Cd,u.every=Wh,u.find=Fh,u.findIndex=ku,u.findKey=Zg,u.findLast=Bh,u.findLastIndex=Zu,u.findLastKey=Yg,u.floor=Ap,u.forEach=es,u.forEachRight=ns,u.forIn=Jg,u.forInRight=Qg,u.forOwn=Vg,u.forOwnRight=jg,u.get=Ni,u.gt=mg,u.gte=yg,u.has=td,u.hasIn=$i,u.head=Ju,u.identity=Ee,u.includes=qh,u.indexOf=Bl,u.inRange=xd,u.invoke=ad,u.isArguments=Fn,u.isArray=q,u.isArrayBuffer=xg,u.isArrayLike=Pe,u.isArrayLikeObject=ce,u.isBoolean=Ag,u.isBuffer=Sn,u.isDate=Sg,u.isElement=bg,u.isEmpty=Pg,u.isEqual=Cg,u.isEqualWith=Eg,u.isError=Di,u.isFinite=Rg,u.isFunction=ln,u.isInteger=fs,u.isLength=vr,u.isMap=cs,u.isMatch=Tg,u.isMatchWith=Lg,u.isNaN=Ig,u.isNative=Og,u.isNil=Mg,u.isNull=Wg,u.isNumber=ls,u.isObject=ae,u.isObjectLike=se,u.isPlainObject=bt,u.isRegExp=Ui,u.isSafeInteger=Fg,u.isSet=hs,u.isString=wr,u.isSymbol=We,u.isTypedArray=Vn,u.isUndefined=Bg,u.isWeakMap=Dg,u.isWeakSet=Ug,u.join=ql,u.kebabCase=Ed,u.last=He,u.lastIndexOf=Gl,u.lowerCase=Rd,u.lowerFirst=Td,u.lt=Ng,u.lte=$g,u.max=Sp,u.maxBy=bp,u.mean=Pp,u.meanBy=Cp,u.min=Ep,u.minBy=Rp,u.stubArray=Xi,u.stubFalse=ki,u.stubObject=gp,u.stubString=dp,u.stubTrue=pp,u.multiply=Tp,u.nth=Hl,u.noConflict=ap,u.noop=Ki,u.now=gr,u.pad=Ld,u.padEnd=Id,u.padStart=Od,u.parseInt=Wd,u.random=Ad,u.reduce=Xh,u.reduceRight=kh,u.repeat=Md,u.replace=Fd,u.result=hd,u.round=Lp,u.runInContext=l,u.sample=Yh,u.size=Vh,u.snakeCase=Bd,u.some=jh,u.sortedIndex=Jl,u.sortedIndexBy=Ql,u.sortedIndexOf=Vl,u.sortedLastIndex=jl,u.sortedLastIndexBy=eh,u.sortedLastIndexOf=nh,u.startCase=Ud,u.startsWith=Nd,u.subtract=Ip,u.sum=Op,u.sumBy=Wp,u.template=$d,u.times=vp,u.toFinite=hn,u.toInteger=G,u.toLength=ds,u.toLower=qd,u.toNumber=ze,u.toSafeInteger=qg,u.toString=J,u.toUpper=Gd,u.trim=Hd,u.trimEnd=zd,u.trimStart=Kd,u.truncate=Xd,u.unescape=kd,u.uniqueId=_p,u.upperCase=Zd,u.upperFirst=qi,u.each=es,u.eachRight=ns,u.first=Ju,zi(u,function(){var e={};return en(u,function(n,t){Q.call(u.prototype,t)||(e[t]=n)}),e}(),{chain:!1}),u.VERSION=M,Ue(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){u[e].placeholder=u}),Ue(["drop","take"],function(e,n){k.prototype[e]=function(t){t=t===a?1:ge(G(t),0);var r=this.__filtered__&&!n?new k(this):this.clone();return r.__filtered__?r.__takeCount__=_e(t,r.__takeCount__):r.__views__.push({size:_e(t,je),type:e+(r.__dir__<0?"Right":"")}),r},k.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),Ue(["filter","map","takeWhile"],function(e,n){var t=n+1,r=t==Xe||t==Pn;k.prototype[e]=function(i){var s=this.clone();return s.__iteratees__.push({iteratee:B(i,3),type:t}),s.__filtered__=s.__filtered__||r,s}}),Ue(["head","last"],function(e,n){var t="take"+(n?"Right":"");k.prototype[e]=function(){return this[t](1).value()[0]}}),Ue(["initial","tail"],function(e,n){var t="drop"+(n?"":"Right");k.prototype[e]=function(){return this.__filtered__?new k(this):this[t](1)}}),k.prototype.compact=function(){return this.filter(Ee)},k.prototype.find=function(e){return this.filter(e).head()},k.prototype.findLast=function(e){return this.reverse().find(e)},k.prototype.invokeMap=z(function(e,n){return typeof e=="function"?new k(this):this.map(function(t){return _t(t,e,n)})}),k.prototype.reject=function(e){return this.filter(pr(B(e)))},k.prototype.slice=function(e,n){e=G(e);var t=this;return t.__filtered__&&(e>0||n<0)?new k(t):(e<0?t=t.takeRight(-e):e&&(t=t.drop(e)),n!==a&&(n=G(n),t=n<0?t.dropRight(-n):t.take(n-e)),t)},k.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},k.prototype.toArray=function(){return this.take(je)},en(k.prototype,function(e,n){var t=/^(?:filter|find|map|reject)|While$/.test(n),r=/^(?:head|last)$/.test(n),i=u[r?"take"+(n=="last"?"Right":""):n],s=r||/^find/.test(n);i&&(u.prototype[n]=function(){var o=this.__wrapped__,f=r?[1]:arguments,h=o instanceof k,w=f[0],_=h||q(o),y=function(X){var Z=i.apply(u,vn([X],f));return r&&E?Z[0]:Z};_&&t&&typeof w=="function"&&w.length!=1&&(h=_=!1);var E=this.__chain__,O=!!this.__actions__.length,D=s&&!E,H=h&&!O;if(!s&&_){o=H?o:new k(this);var U=e.apply(o,f);return U.__actions__.push({func:lr,args:[y],thisArg:a}),new $e(U,E)}return D&&H?e.apply(this,f):(U=this.thru(y),D?r?U.value()[0]:U.value():U)})}),Ue(["pop","push","shift","sort","splice","unshift"],function(e){var n=Dt[e],t=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);u.prototype[e]=function(){var i=arguments;if(r&&!this.__chain__){var s=this.value();return n.apply(q(s)?s:[],i)}return this[t](function(o){return n.apply(q(o)?o:[],i)})}}),en(k.prototype,function(e,n){var t=u[n];if(t){var r=t.name+"";Q.call(kn,r)||(kn[r]=[]),kn[r].push({name:n,func:t})}}),kn[ir(a,ee).name]=[{name:"wrapper",func:a}],k.prototype.clone=kf,k.prototype.reverse=Zf,k.prototype.value=Yf,u.prototype.at=bh,u.prototype.chain=Ph,u.prototype.commit=Ch,u.prototype.next=Eh,u.prototype.plant=Th,u.prototype.reverse=Lh,u.prototype.toJSON=u.prototype.valueOf=u.prototype.value=Ih,u.prototype.first=u.prototype.head,lt&&(u.prototype[lt]=Rh),u},zn=Cf();En?((En.exports=zn)._=zn,Hr._=zn):pe._=zn}).call(fv)}(Pt,Pt.exports)),Pt.exports}var Ds=cv();function et(d,g){const a=Array.isArray(g),M=a?S=>g.some(T=>Ds.isEqual(S,T)):S=>Ds.isEqual(S,g),b=a?g.length:1;return"any"in d?b>0&&d.any.some(M):"all"in d?b>0&&d.all.every(M):"none"in d?b===0||!d.none.some(M):!0}function lv(d,g,a){return"lte"in d?a(g)<=a(d.lte):"eq"in d?a(g)===a(d.eq):"gte"in d?a(g)>=a(d.gte):!0}class hv{constructor(g){Bn(this,"source");Bn(this,"draw",(g,a)=>{var M;return(M=this.source.filter(b=>this.condExecutor(b.cond,a)).choice(g))==null?void 0:M.thing});Bn(this,"available",g=>new Set(this.source.filter(a=>this.condExecutor(a.cond,g)).map(a=>a.thing)));this.source=g}}const gv=new bn([I(d=>["vin","gan","rron","sh","rryl","ley","ya","cy","cey"].choice(d))]),dv=new bn([I(d=>["t","y","rr","nn","s","sh"].choice(d)),I(d=>["on","in","ah","ley","leigh","cy","cey"].choice(d))]),pv=new bn([I(d=>["A","Cha","Ba","Da","Ka","Ke","Pe","Ha","Le","La"].choice(d)),I(d=>[gv,dv].choice(d).generate(d))]),vv=I(d=>[I(g=>["Tom","Richard","Harry","Edward","Jack","Paul","George","Logan","Ethan","Bill","Winston","Lewis","Luke","John","Peter","Philip","Thomas","Simon","James","Andrew","Bart","Lisa","Alex","Sam","Ellis","Kai","Ash","Charlie","Mary","Eve","Ashley","Alice","Triss","Stacy","Lucy","Lily","Rose","Elizabeth","Jessica","Emma","Abigail","Megan","Sarah","Julia","Kate","Karen","Carol"].choice(g)),pv].choice(d).generate(d)),wv=new bn([I(d=>["Lacri","Lace","Moro","Ala","Tri","Be","Di","Ma","Pe"].choice(d)),I(d=>["mer","v","t","c","m","n","l","s"].choice(d)),I(d=>["ius","us","ion","or","a","ia","ina","ira"].choice(d))]);class tt extends hv{constructor(g){super(g)}condExecutor(g,a){const M=b=>({common:0,uncommon:1,rare:2,epic:3,legendary:4})[b];return(!g.isSentient||a.sentient)&&(!g.rarity||lv(g.rarity,a.rarity,M))&&(!g.themes||et(g.themes,a.themes))&&(!g.personality||et(g.personality,a.sentient?a.sentient.personality:[]))&&(!g.activePowers||et(g.activePowers,a.active.powers))&&(!g.passivePowers||et(g.passivePowers,a.passivePowers))&&(!g.languages||et(g.languages,a.sentient?a.sentient.languages:[]))&&(!g.shapeFamily||et(g.shapeFamily,a.shape.group))}}const _v=new tt(rv),mv=new tt(iv),Yi=new tt(ev),Us=new tt(tv),yv=new tt(av),qs=new tt(j0),Gs=new Set(["the","a","an","by","of"]),xv=(d,g,a)=>I(()=>{var b;return((b=new bn([I(S=>qs.draw(S,d).generate(S)),I(" "),I(g)]))==null?void 0:b.generate(a)).split(/\s/).map(S=>Gs.has(S)?S:S.capFirst()).join(" ")}),Av=(d,g,a)=>I(()=>{var b;return((b=new bn([I(S=>[wv,vv].choice(S).generate(S)),I([", ",", the "].choice(a)),I(S=>qs.draw(S,d).generate(S)),I(" "),I(g)]))==null?void 0:b.generate(a)).split(/\s/).map(S=>Gs.has(S)?S:S.capFirst()).join(" ")}),Sv=d=>{var m,x,C,F,oe;const g=W=>{const ee=W(),Re=Object.entries(Fs).sort(([fe,N],[K,ue])=>N.percentile-ue.percentile);for(const[fe,N]of Re)if(ov(fe)&&ee<N.percentile)return fe;throw new Error("failed to generate rarity")},a=r0(d),M=g(a),b=Fs[M].paramsProvider(a),S=structuredClone(b),T=a()<b.sentienceChance,R=uv[M].generate(a),c={id:d,description:"TODO",rarity:M,themes:[],name:"",shape:{particular:"sword",group:"sword"},damage:{as:"sword",const:R},toHit:R,active:{maxCharges:b.nCharges,rechargeMethod:"",powers:[]},passivePowers:[],sentient:T?{personality:[],languages:["Common."]}:!1},A=new Set(Ns),P=[1,2].choice(a);for(;c.themes.length<P||Yi.available(c).size<b.nActive+b.nUnlimitedActive||Us.available(c).size<b.nPassive;){const W=A.choice(a);if(W!=null)A.delete(W),c.themes.push(W);else break}if(c.shape=yv.draw(a,c).generate(a),c.damage.as=c.shape.group,c.name=(m=T?Av(c,c.shape.particular,a):xv(c,c.shape.particular,a))==null?void 0:m.generate(a),c.description="TODO",c.sentient)for(const W of c.themes){const ee=(x=_v.draw(a,c))==null?void 0:x.generate(a);ee!=null&&c.sentient.personality.push(ee)}for(;b.nPassive-- >0;){const W=Us.draw(a,c);if(W!=null)if("language"in W&&c.sentient)console.log(W,W.language),c.sentient.languages.push(W.desc);else if("miscPower"in W){W.desc!==null&&c.passivePowers.push(W);for(const ee in W.bonus){const Re=ee;switch(Re){case"addDamageDie":for(const fe in W.bonus.addDamageDie){const N=fe;typeof W.bonus.addDamageDie[N]=="number"&&(c.damage[N]===void 0&&(c.damage[N]=0),c.damage[N]+=W.bonus.addDamageDie[N])}break;case"plus":c.toHit+=W.bonus.plus,c.damage.const===void 0&&(c.damage.const=0),c.damage.const+=1;break;default:return Re}}}else throw new Error("Could not assign passive power, config was invalid.")}for(c.active.rechargeMethod=(C=mv.draw(a,c))==null?void 0:C.generate(a);b.nActive-- >0;){const W=(F=Yi.draw(a,c))==null?void 0:F.generate(a);W!=null&&c.active.powers.push(W)}for(;b.nUnlimitedActive-- >0;){const W=(oe=Yi.draw(a,c))==null?void 0:oe.generate(a);W!=null&&c.active.powers.push({...W,cost:"at will"})}return c.active.maxCharges=c.active.powers.filter(W=>W.cost!="at will").reduce((W,ee)=>Math.max(ee.cost,W),c.active.maxCharges),c.passivePowers.forEach(W=>{W.desc=typeof W.desc=="string"?W.desc:W.desc.generate(a)}),console.log("generated weapon",c,S),c};function bv(d){const g=d;return!!(g!==null&&g.root&&g.outputRoot&&g.name&&g.damage&&g.toHit&&g.active&&g.active.maxCharges&&g.active.rechargeMethod&&g.active.powers&&g.passivePowers&&g.isSentient&&g.personality&&g.languages)}class Pv{constructor(g){Bn(this,"view");var M;const a=document.getElementById(g);if(a)this.view={root:a,outputRoot:a.querySelector(".weapon-generator-output"),name:a.querySelector(".weapon-name"),damage:a.querySelector(".weapon-damage"),toHit:a.querySelector(".weapon-tohit"),active:{maxCharges:a.querySelector(".weapon-active-powers-n-charges"),rechargeMethod:a.querySelector(".weapon-active-powers-recharge-method"),powers:a.querySelector(".weapon-active-powers-root")},passivePowers:a.querySelector(".weapon-passive-powers-root"),isSentient:a.querySelector(".weapon-is-sentient"),personality:a.querySelector(".weapon-personality-root"),languages:a.querySelector(".weapon-languages-root")},(M=a.querySelector(".generate-button"))==null||M.addEventListener("click",(()=>{const b=Math.floor(Math.random()*1e20).toString();this.update(b),window.history.pushState(null,"",`?id=${b}`)}).bind(this)),this.onIDChanged(),window.addEventListener("popstate",(()=>{this.onIDChanged()}).bind(this));else throw new Error(`couldn't find weapon generator root with id ${g}`)}textForCharges(g){return g==="at will"?g:g==1?"1 charge":`${g} charges`}buildList(g,a,M){g.parentElement&&(g.parentElement.hidden=a.length===0),g.innerHTML="";for(const b of a){const S=document.createElement("div");g.appendChild(S),M(S,b)}}onIDChanged(){const a=new URLSearchParams(window.location.search).get("id");a&&this.update(a)}update(g){if(bv(this.view))try{this.view.outputRoot.hidden=!1;const a=Sv(g);this.view.name.innerText=a.name,this.view.name.classList.remove(...$s.map(S=>`weapon-rarity-${S}`)),this.view.name.classList.add(`weapon-rarity-${a.rarity}`);const M=`as ${a.damage.as}`,b=Object.keys(a.damage).filter(S=>S!="as").sort((S,T)=>{const R=["d20","d12","d10","d8","d6","d4","const"];return R.findIndex(c=>c===S)-R.findIndex(c=>c===T)});this.view.damage.innerText=b.length>0?b.reduce((S,T)=>(a.damage[T]??0)>0?S+` + ${a.damage[T]}${T==="const"?"":T}`:S,M):M,this.view.toHit.innerText="",a.toHit>0&&(this.view.toHit.innerText=` (+${a.toHit} to hit)`),this.view.active.maxCharges.innerText=`${this.textForCharges(a.active.maxCharges)}.`,this.view.active.rechargeMethod.innerText=a.active.rechargeMethod.capFirst()+".",this.buildList(this.view.active.powers,a.active.powers,(S,T)=>{S.classList.add("weapon-generator-active-list-item");const R=document.createElement("p");if(R.innerText=`${T.desc.capFirst()} (${this.textForCharges(T.cost)}).`,S.appendChild(R),T.additionalNotes&&T.additionalNotes.length>0){const c=document.createElement("div");S.appendChild(c);for(const A of T.additionalNotes){const P=document.createElement("p");P.innerText=A,P.classList.add("weapon-generator-active-list-item"),c.appendChild(P)}}}),this.buildList(this.view.passivePowers,a.passivePowers.filter(S=>S.desc!==null),(S,T)=>{S.innerText=T.desc,S.classList.add("weapon-generator-active-list-item")}),a.sentient?(this.view.isSentient.hidden=!1,this.buildList(this.view.languages,a.sentient.languages,(S,T)=>{S.innerText=T,S.classList.add("weapon-generator-active-list-item")}),this.buildList(this.view.personality,a.sentient.personality,(S,T)=>{S.innerText=T,S.classList.add("weapon-generator-active-list-item")})):(this.view.isSentient.hidden=!0,this.view.languages.innerHTML="",this.view.personality.innerHTML="")}catch(a){this.view.outputRoot.hidden=!0,console.error(a)}else throw new Error("couldn't get display")}}new Pv("main-generator");
